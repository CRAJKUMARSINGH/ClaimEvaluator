var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{r as t,j as a,V as i,R as r,c as l,A as n,d as c,X as d,T as o,f as m,P as x,g as u,h,S as p,i as j,k as f,I as g,l as y,m as v,o as N,p as b,q as w,u as C,v as S,L as k,w as F,x as T,y as A,z as D,B as $,F as I,G as R,H as E,J as V,K as z,M as B,N as O,O as P,Q as L,U,W as q,Y as M,Z as _,$ as H,a0 as Q,a1 as G,a2 as W,a3 as J,a4 as K,a5 as Y,a6 as Z,a7 as X,a8 as ee,a9 as se,aa as te,ab as ae,ac as ie,ad as re,ae as le,af as ne,ag as ce,ah as de,ai as oe,aj as me,ak as xe,al as ue,am as he,an as pe,ao as je,ap as fe,aq as ge,ar as ye,as as ve,at as Ne,au as be,av as we,aw as Ce,ax as Se,ay as ke,az as Fe,aA as Te,aB as Ae,aC as De,aD as $e,aE as Ie,aF as Re,aG as Ee,aH as Ve,aI as ze,aJ as Be,aK as Oe,aL as Pe,aM as Le,aN as Ue,aO as qe,aP as Me}from"./vendor-hxkGeUWA.js";import{t as _e,c as He}from"./utils-BpqZfnrR.js";import{c as Qe,a as Ge}from"./math-BdYBO9A6.js";import{C as We,a as Je,b as Ke,P as Ye,c as Ze,p as Xe,d as es,e as ss,i as ts}from"./charts-BDL1hZmC.js";import"./ui-CttiZxwU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();let as=0;const is=new Map,rs=e=>{if(is.has(e))return;const s=setTimeout(()=>{is.delete(e),ds({type:"REMOVE_TOAST",toastId:e})},1e6);is.set(e,s)},ls=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{const{toastId:t}=s;return t?rs(t):e.toasts.forEach(e=>{rs(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===s.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},ns=[];let cs={toasts:[]};function ds(e){cs=ls(cs,e),ns.forEach(e=>{e(cs)})}function os({...e}){const s=(as=(as+1)%Number.MAX_SAFE_INTEGER,as.toString()),t=()=>ds({type:"DISMISS_TOAST",toastId:s});return ds({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>ds({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function ms(){const[e,s]=t.useState(cs);return t.useEffect(()=>(ns.push(s),()=>{const e=ns.indexOf(s);e>-1&&ns.splice(e,1)}),[e]),{...e,toast:os,dismiss:e=>ds({type:"DISMISS_TOAST",toastId:e})}}function xs(...e){return _e(He(e))}const us=x,hs=t.forwardRef(({className:e,...s},t)=>a.jsx(i,{ref:t,className:xs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));hs.displayName=i.displayName;const ps=l("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),js=t.forwardRef(({className:e,variant:s,...t},i)=>a.jsx(r,{ref:i,className:xs(ps({variant:s}),e),...t}));js.displayName=r.displayName;t.forwardRef(({className:e,...s},t)=>a.jsx(n,{ref:t,className:xs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s})).displayName=n.displayName;const fs=t.forwardRef(({className:e,...s},t)=>a.jsx(c,{ref:t,className:xs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:a.jsx(d,{className:"h-4 w-4"})}));fs.displayName=c.displayName;const gs=t.forwardRef(({className:e,...s},t)=>a.jsx(o,{ref:t,className:xs("text-sm font-semibold",e),...s}));gs.displayName=o.displayName;const ys=t.forwardRef(({className:e,...s},t)=>a.jsx(m,{ref:t,className:xs("text-sm opacity-90",e),...s}));function vs(){const{toasts:e}=ms();return a.jsxs(us,{children:[e.map(function({id:e,title:s,description:t,action:i,...r}){return a.jsxs(js,{...r,children:[a.jsxs("div",{className:"grid gap-1",children:[s&&a.jsx(gs,{children:s}),t&&a.jsx(ys,{children:t})]}),i,a.jsx(fs,{})]},e)}),a.jsx(hs,{})]})}ys.displayName=m.displayName;const Ns=h;function bs(){return null}t.forwardRef(({className:e,sideOffset:s=4,...t},i)=>a.jsx(u,{ref:i,sideOffset:s,className:xs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...t})).displayName=u.displayName;const ws=t.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:xs("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));ws.displayName="Card";const Cs=t.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:xs("flex flex-col space-y-1.5 p-6",e),...s}));Cs.displayName="CardHeader";const Ss=t.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:xs("text-2xl font-semibold leading-none tracking-tight",e),...s}));Ss.displayName="CardTitle";const ks=t.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:xs("text-sm text-muted-foreground",e),...s}));ks.displayName="CardDescription";const Fs=t.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:xs("p-6 pt-0",e),...s}));Fs.displayName="CardContent";const Ts=t.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:xs("flex items-center p-6 pt-0",e),...s}));Ts.displayName="CardFooter";const As=l("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ds=t.forwardRef(({className:e,variant:s,size:t,asChild:i=!1,...r},l)=>{const n=i?p:"button";return a.jsx(n,{className:xs(As({variant:s,size:t,className:e})),ref:l,...r})});Ds.displayName="Button";const $s=l("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Is({className:e,variant:s,...t}){return a.jsx("div",{className:xs($s({variant:s}),e),...t})}const Rs=t.forwardRef(({className:e,type:s,...t},i)=>a.jsx("input",{type:s,className:xs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...t}));Rs.displayName="Input";const Es=l("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vs=t.forwardRef(({className:e,...s},t)=>a.jsx(j,{ref:t,className:xs(Es(),e),...s}));Vs.displayName=j.displayName;const zs=I,Bs=R,Os=t.forwardRef(({className:e,children:s,...t},i)=>a.jsxs(f,{ref:i,className:xs("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(g,{asChild:!0,children:a.jsx(y,{className:"h-4 w-4 opacity-50"})})]}));Os.displayName=f.displayName;const Ps=t.forwardRef(({className:e,...s},t)=>a.jsx(v,{ref:t,className:xs("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(N,{className:"h-4 w-4"})}));Ps.displayName=v.displayName;const Ls=t.forwardRef(({className:e,...s},t)=>a.jsx(b,{ref:t,className:xs("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(y,{className:"h-4 w-4"})}));Ls.displayName=b.displayName;const Us=t.forwardRef(({className:e,children:s,position:t="popper",...i},r)=>a.jsx(w,{children:a.jsxs(C,{ref:r,className:xs("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...i,children:[a.jsx(Ps,{}),a.jsx(S,{className:xs("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(Ls,{})]})}));Us.displayName=C.displayName;t.forwardRef(({className:e,...s},t)=>a.jsx(k,{ref:t,className:xs("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=k.displayName;const qs=t.forwardRef(({className:e,children:s,...t},i)=>a.jsxs(F,{ref:i,className:xs("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(T,{children:a.jsx(A,{className:"h-4 w-4"})})}),a.jsx(D,{children:s})]}));qs.displayName=F.displayName;t.forwardRef(({className:e,...s},t)=>a.jsx($,{ref:t,className:xs("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=$.displayName;const Ms=t.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...i},r)=>a.jsx(E,{ref:r,decorative:t,orientation:s,className:xs("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...i}));Ms.displayName=E.displayName;const _s=[{id:"prolongation-basic",name:"Advanced Prolongation Cost Analysis",type:"prolongation",description:"Calculate prolongation costs with enhanced quantum computation including plant, equipment, overhead, and risk factors",parameters:[{id:"delay-period",label:"Delay Period (Days)",type:"number",required:!0,validation:{min:1}},{id:"contract-value",label:"Contract Value (₹ Crores)",type:"currency",required:!0},{id:"plant-book-value",label:"Plant Book Value (₹ Crores)",type:"currency",required:!0},{id:"escalation-rate",label:"Escalation Rate (%)",type:"percentage",required:!0,validation:{min:0,max:25}},{id:"inflation-rate",label:"Inflation Rate (%)",type:"percentage",required:!0,validation:{min:0,max:15}},{id:"productivity-loss",label:"Productivity Loss (%)",type:"percentage",required:!0,validation:{min:0,max:50}}]},{id:"acceleration-analysis",name:"Acceleration Cost Analysis",type:"acceleration",description:"Calculate costs for accelerating work to meet revised schedules",parameters:[{id:"acceleration-period",label:"Acceleration Period (Days)",type:"number",required:!0},{id:"additional-resources",label:"Additional Resource Cost",type:"currency",required:!0},{id:"overtime-premium",label:"Overtime Premium (%)",type:"percentage",required:!0}]},{id:"disruption-impact",name:"Disruption Impact Analysis",type:"disruption",description:"Assess productivity loss due to disruption events",parameters:[{id:"affected-quantity",label:"Affected Work Quantity",type:"number",required:!0},{id:"productivity-loss",label:"Productivity Loss (%)",type:"percentage",required:!0,validation:{min:0,max:50}},{id:"unit-rate",label:"Unit Rate",type:"currency",required:!0}]}];function Hs(){const[e,s]=t.useState(null),[i,r]=t.useState({}),[l,n]=t.useState(null),[c,d]=t.useState(!1),{toast:o}=ms(),m=(e,s)=>{r(t=>({...t,[e]:s}))},x=(e,s)=>{const t=Qe(Ge);if("prolongation"===e.type){const e=s["delay-period"]||0,a=1e7*(s["contract-value"]||0),i=1e7*(s["plant-book-value"]||0),r=(s["escalation-rate"]||0)/100,l=(s["inflation-rate"]||0)/100,n=(s["productivity-loss"]||0)/100,c=e/30,d=.12,o=.08,m=.02,x=t.evaluate(`${i} * (${d} + ${o} + ${m}) / 12`),u=t.evaluate(`${x} * ${c}`),h=t.evaluate(`${i} * 0.30`),p=t.evaluate(`${h} * 0.025`),j=t.evaluate(`${p} * ${c}`),f=.03,g=t.evaluate(`${a} * ${f} * ${c} / 12`),y=.02,v=t.evaluate(`${a} * ${y} * ${c} / 12`),N=t.evaluate(`${a} * ${r} * ${c} / 12`),b=t.evaluate(`${a} * ${l} * ${c} / 12`),w=t.evaluate(`${a} * 0.45`),C=t.evaluate(`${w} * ${n}`),S=t.evaluate(`${u} + ${j} + ${g} + ${v} + ${N} + ${b} + ${C}`),k=1.15,F=1.08,T=t.evaluate(`${S} * ${k} * ${F}`),A=t.evaluate(`((${T} - ${S}) / ${S}) * 100`),D=Math.min(95,Math.max(60,85+(e>180?5:0)+(r>.1?-5:0))),$=[{scenario:"Conservative",amount:t.evaluate(`${T} * 0.85`),probability:.2},{scenario:"Most Likely",amount:T,probability:.6},{scenario:"Optimistic",amount:t.evaluate(`${T} * 1.15`),probability:.2}],I=[],R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],E=t.evaluate(`${T} / 12`);for(let s=0;s<12;s++){const e=E,a=t.evaluate(`${E} * (1 + ${r} * ${s} / 12)`),i=t.evaluate(`${a} - ${e}`);I.push({month:R[s],plannedCost:parseFloat(e.toFixed(2)),actualCost:parseFloat(a.toFixed(2)),variance:parseFloat(i.toFixed(2))})}return{totalAmount:parseFloat(S.toFixed(2)),enhancedAmount:parseFloat(T.toFixed(2)),enhancementPercentage:parseFloat(A.toFixed(2)),breakdown:[{category:"Plant & Equipment (Owned)",amount:parseFloat(u.toFixed(2)),percentage:35},{category:"Plant & Equipment (Hired)",amount:parseFloat(j.toFixed(2)),percentage:15},{category:"Site Overheads",amount:parseFloat(g.toFixed(2)),percentage:20},{category:"Head Office Overheads",amount:parseFloat(v.toFixed(2)),percentage:10},{category:"Escalation",amount:parseFloat(N.toFixed(2)),percentage:12},{category:"Inflation",amount:parseFloat(b.toFixed(2)),percentage:5},{category:"Productivity Loss",amount:parseFloat(C.toFixed(2)),percentage:3}],supportingSchedules:["Plant & Equipment Schedule (Enhanced)","Overhead Cost Breakdown (Detailed)","Escalation Calculation Sheet (MathJS)","Cash Flow Impact Analysis (Monthly)","Risk Assessment Matrix","Financial Projections (3 Scenarios)","Productivity Loss Analysis"],riskFactors:[{factor:"Market Volatility",impact:"high",mitigation:"Use indexed rates and hedging strategies"},{factor:"Resource Availability",impact:"high",mitigation:"Secure alternative suppliers and equipment"},{factor:"Regulatory Changes",impact:"medium",mitigation:"Monitor regulatory updates and compliance"},{factor:"Currency Fluctuation",impact:"medium",mitigation:"Use forward contracts and currency hedging"}],confidenceScore:D,financialProjections:$,impactSchedule:I}}return{totalAmount:1e6,enhancedAmount:115e4,enhancementPercentage:15,breakdown:[{category:"Primary Cost",amount:8e5,percentage:80},{category:"Risk Premium",amount:2e5,percentage:20}],supportingSchedules:["Basic Calculation Sheet"],riskFactors:[],confidenceScore:75,financialProjections:[{scenario:"Conservative",amount:977500,probability:.2},{scenario:"Most Likely",amount:115e4,probability:.6},{scenario:"Optimistic",amount:1322500,probability:.2}],impactSchedule:[]}},u=e=>{l&&(o({title:`Exporting to ${e.toUpperCase()}`,description:"Download will begin shortly..."}),setTimeout(()=>{o({title:"Export Complete",description:`Calculation exported to ${e.toUpperCase()} format`})},1500))},h=e=>{var s,t,r,l,n,c,d;const o=i[e.id]||"";switch(e.type){case"currency":return a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"₹"}),a.jsx(Rs,{type:"number",value:o,onChange:s=>m(e.id,parseFloat(s.target.value)||0),className:"pl-8",min:null==(s=e.validation)?void 0:s.min,max:null==(t=e.validation)?void 0:t.max})]});case"percentage":return a.jsxs("div",{className:"relative",children:[a.jsx(Rs,{type:"number",value:o,onChange:s=>m(e.id,parseFloat(s.target.value)||0),className:"pr-8",min:null==(r=e.validation)?void 0:r.min,max:null==(l=e.validation)?void 0:l.max}),a.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]});case"select":return a.jsxs(zs,{value:o,onValueChange:s=>m(e.id,s),children:[a.jsx(Os,{children:a.jsx(Bs,{placeholder:"Select option"})}),a.jsx(Us,{children:null==(n=e.options)?void 0:n.map(e=>a.jsx(qs,{value:e,children:e},e))})]});default:return a.jsx(Rs,{type:e.type,value:o,onChange:s=>m(e.id,s.target.value),min:null==(c=e.validation)?void 0:c.min,max:null==(d=e.validation)?void 0:d.max})}},p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(V,{className:"mr-3 text-blue-600"}),"Quantum Calculator"]}),a.jsx("p",{className:"text-gray-600",children:"Advanced financial modeling for construction claims"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"space-y-4",children:a.jsxs(ws,{children:[a.jsxs(Cs,{children:[a.jsx(Ss,{children:"Calculation Templates"}),a.jsx(ks,{children:"Choose a calculation methodology"})]}),a.jsx(Fs,{className:"space-y-2",children:_s.map(t=>a.jsxs("div",{onClick:()=>{s(t),r({}),n(null)},className:"p-3 rounded-lg border cursor-pointer transition-colors "+((null==e?void 0:e.id)===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[a.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),a.jsx(Is,{variant:"outline",className:"mt-2",children:t.type})]},t.id))})]})}),a.jsx("div",{className:"space-y-4",children:e&&a.jsxs(ws,{children:[a.jsxs(Cs,{children:[a.jsx(Ss,{children:"Parameters"}),a.jsx(ks,{children:e.description})]}),a.jsxs(Fs,{className:"space-y-4",children:[e.parameters.map(e=>a.jsxs("div",{children:[a.jsxs(Vs,{htmlFor:e.id,className:"text-sm font-medium",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsx("div",{className:"mt-1",children:h(e)})]},e.id)),a.jsx(Ms,{}),a.jsx(Ds,{onClick:async()=>{e&&(d(!0),setTimeout(()=>{const s=x(e,i),t={id:`calc-${Date.now()}`,name:`${e.name} - ${(new Date).toLocaleDateString()}`,type:e.type,parameters:i,results:s};n(t),d(!1),o({title:"Calculation Complete",description:`Quantum analysis completed for ${e.name}`})},2e3))},disabled:c,className:"w-full",children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Calculating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(V,{className:"mr-2 h-4 w-4"}),"Calculate Quantum"]})})]})]})}),a.jsx("div",{className:"space-y-4",children:(null==l?void 0:l.results)&&a.jsxs(a.Fragment,{children:[a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs(Ss,{className:"flex items-center justify-between",children:["Calculation Results",a.jsx(Is,{variant:"outline",className:"bg-green-100 text-green-800",children:"✓ Complete"})]})}),a.jsxs(Fs,{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Base Quantum"}),a.jsx("p",{className:"text-2xl font-bold text-gray-700",children:p(l.results.totalAmount)}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(z,{className:"h-4 w-4 text-green-600"}),a.jsxs("span",{className:"text-sm text-green-600",children:["+",l.results.enhancementPercentage,"%"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(B,{className:"h-4 w-4 text-blue-600"}),a.jsxs("span",{className:"text-sm text-blue-600",children:[l.results.confidenceScore,"% Confidence"]})]})]})]}),a.jsxs("div",{className:"text-center bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Enhanced Quantum"}),a.jsx("p",{className:"text-3xl font-bold text-green-600",children:p(l.results.enhancedAmount)}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"With risk adjustments and market factors"})]}),a.jsx(Ms,{}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Detailed Breakdown"}),a.jsx("div",{className:"space-y-2",children:l.results.breakdown.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:e.category}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium",children:p(e.amount)}),a.jsxs("p",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},s))})]}),a.jsx(Ms,{}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Financial Projections"}),a.jsx("div",{className:"space-y-2",children:l.results.financialProjections.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsx("span",{className:"text-sm text-gray-600",children:e.scenario}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium",children:p(e.amount)}),a.jsxs("p",{className:"text-xs text-gray-500",children:[(100*e.probability).toFixed(0),"% probability"]})]})]},s))})]}),a.jsx(Ms,{}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Export Options"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs(Ds,{variant:"outline",size:"sm",onClick:()=>u("pdf"),className:"flex flex-col py-3 h-auto",children:[a.jsx(O,{className:"h-4 w-4 mb-1"}),a.jsx("span",{className:"text-xs",children:"PDF"})]}),a.jsxs(Ds,{variant:"outline",size:"sm",onClick:()=>u("excel"),className:"flex flex-col py-3 h-auto",children:[a.jsx(P,{className:"h-4 w-4 mb-1"}),a.jsx("span",{className:"text-xs",children:"Excel"})]}),a.jsxs(Ds,{variant:"outline",size:"sm",onClick:()=>u("word"),className:"flex flex-col py-3 h-auto",children:[a.jsx(O,{className:"h-4 w-4 mb-1"}),a.jsx("span",{className:"text-xs",children:"Word"})]})]})]})]})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Supporting Schedules"})}),a.jsx(Fs,{children:a.jsx("ul",{className:"space-y-2",children:l.results.supportingSchedules.map((e,s)=>a.jsxs("li",{className:"flex items-center text-sm",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),e]},s))})})]}),l.results.impactSchedule.length>0&&a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Monthly Impact Schedule"})}),a.jsx(Fs,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2",children:"Month"}),a.jsx("th",{className:"text-right py-2",children:"Planned"}),a.jsx("th",{className:"text-right py-2",children:"Actual"}),a.jsx("th",{className:"text-right py-2",children:"Variance"})]})}),a.jsx("tbody",{children:l.results.impactSchedule.map((e,s)=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"py-2",children:e.month}),a.jsx("td",{className:"text-right py-2",children:p(e.plannedCost)}),a.jsx("td",{className:"text-right py-2",children:p(e.actualCost)}),a.jsxs("td",{className:"text-right py-2 "+(e.variance>=0?"text-green-600":"text-red-600"),children:[e.variance>=0?"+":"",p(e.variance)]})]},s))})]})})})]}),l.results.riskFactors.length>0&&a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Risk Assessment"})}),a.jsx(Fs,{className:"space-y-3",children:l.results.riskFactors.map((e,s)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium text-gray-900",children:e.factor}),a.jsx(Is,{variant:"outline",className:"high"===e.impact?"border-red-500 text-red-700":"medium"===e.impact?"border-yellow-500 text-yellow-700":"border-green-500 text-green-700",children:e.impact})]}),a.jsx("p",{className:"text-sm text-gray-600",children:e.mitigation})]},s))})]})]})})]})]})}function Qs(){const[e,s]=t.useState([]),[i,r]=t.useState({totalFiles:0,supportedFiles:0}),[l,n]=t.useState(!1);t.useEffect(()=>{c()},[]);const c=async()=>{try{const e=await fetch("/api/files/latest");if(e.ok){const t=await e.json();s(t.files.slice(0,3)),r({totalFiles:t.totalFiles,supportedFiles:t.supportedFiles})}}catch(e){}},d=e=>{switch(e.toLowerCase()){case".pdf":return"📄";case".doc":case".docx":return"📝";case".xlsx":case".xls":return"📊";case".txt":return"📋";case".tex":return"📜";default:return"📁"}},o=[{id:"dashboard",title:"Dashboard",description:"Monitor files and project status",icon:a.jsx(z,{className:"h-8 w-8"}),route:"/dashboard",color:"from-blue-500 to-blue-600"},{id:"templates",title:"NHAI Templates",description:"Professional claim templates",icon:a.jsx(O,{className:"h-8 w-8"}),route:"/templates",badge:"NEW",color:"from-green-500 to-green-600"},{id:"ai-assistants",title:"AI Assistants",description:"Specialized AI experts",icon:a.jsx(_,{className:"h-8 w-8"}),route:"/ai-assistants",badge:"PRO",color:"from-purple-500 to-purple-600"},{id:"claims",title:"Claims Analysis",description:"Advanced claim evaluation",icon:a.jsx(L,{className:"h-8 w-8"}),route:"/claims",color:"from-orange-500 to-orange-600"},{id:"documents",title:"Document Manager",description:"Organize and process files",icon:a.jsx(H,{className:"h-8 w-8"}),route:"/documents",color:"from-teal-500 to-teal-600"},{id:"calculator",title:"Quantum Calculator",description:"Advanced financial modeling",icon:a.jsx(V,{className:"h-8 w-8"}),route:"#",badge:"BETA",color:"from-red-500 to-red-600"}];return l?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quantum Calculator"}),a.jsx(Ds,{onClick:()=>n(!1),variant:"outline",children:"Back to Home"})]})})}),a.jsx(Hs,{})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"container mx-auto px-6 py-6",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mr-4",children:a.jsx(L,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"ClaimEvaluator11"}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"Construction Claims Analysis Platform"})]})]}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"AI-powered analysis for FIDIC and NHAI contract claims with professional templates, quantum calculations, and specialized AI assistants."})]})})}),a.jsx("div",{className:"container mx-auto px-6 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"lg:col-span-3",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Platform Features"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(e=>a.jsxs(ws,{className:"relative overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",onClick:()=>{"calculator"===e.id&&n(!0)},children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-5 group-hover:opacity-10 transition-opacity`}),a.jsxs(Cs,{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${e.color} rounded-lg flex items-center justify-center text-white`,children:e.icon}),e.badge&&a.jsx(Is,{variant:"secondary",className:"text-xs font-bold",children:e.badge})]}),a.jsx(Ss,{className:"text-lg",children:e.title}),a.jsx(ks,{children:e.description})]}),a.jsx(Fs,{className:"relative",children:"calculator"===e.id?a.jsx(Ds,{className:"w-full",onClick:()=>n(!0),children:"Launch Calculator"}):a.jsx(U,{to:e.route,children:a.jsxs(Ds,{className:"w-full",children:["Open ",e.title]})})})]},e.id))})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsx(ws,{children:a.jsxs(Fs,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.totalFiles}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Files"})]})}),a.jsx(ws,{children:a.jsxs(Fs,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.supportedFiles}),a.jsx("div",{className:"text-sm text-gray-500",children:"Supported Files"})]})}),a.jsx(ws,{children:a.jsxs(Fs,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"36.2%"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Enhancement Rate"})]})}),a.jsx(ws,{children:a.jsxs(Fs,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"₹451.47 Cr"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Project Value"})]})})]})]}),a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs(Ss,{className:"flex items-center",children:[a.jsx(q,{className:"mr-2 h-5 w-5"}),"Project Status"]})}),a.jsxs(Fs,{className:"space-y-3",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"WAGAD INFRAPROJECTS PVT LTD"}),a.jsx("div",{className:"text-gray-600",children:"Highway Construction Project"})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"text-gray-600",children:"Total Claim Value"}),a.jsx("div",{className:"text-xl font-bold text-blue-600",children:"₹451.47 Cr"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"67%"}})}),a.jsx("div",{className:"text-xs text-gray-500",children:"67% Analysis Complete"})]})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ss,{children:"Latest Files"}),a.jsx(U,{to:"/dashboard",className:"text-sm text-blue-600 hover:text-blue-800",children:"View All →"})]})}),a.jsx(Fs,{children:e.length>0?a.jsx("div",{className:"space-y-3",children:e.map((e,s)=>{return a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50",children:[a.jsx("span",{className:"text-xl",children:d(e.extension)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:e.filename}),a.jsxs("p",{className:"text-xs text-gray-500",children:[e.sizeFormatted," • ",(t=e.modifiedTime,new Date(t).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]},s);var t})}):a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No files found"})})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs(Ss,{className:"flex items-center",children:[a.jsx(M,{className:"mr-2 h-5 w-5"}),"Quick Actions"]})}),a.jsxs(Fs,{className:"space-y-2",children:[a.jsx(U,{to:"/templates",className:"block",children:a.jsxs(Ds,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(O,{className:"mr-2 h-4 w-4"}),"New Template"]})}),a.jsx(U,{to:"/ai-assistants",className:"block",children:a.jsxs(Ds,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(_,{className:"mr-2 h-4 w-4"}),"AI Assistant"]})}),a.jsxs(Ds,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>n(!0),children:[a.jsx(V,{className:"mr-2 h-4 w-4"}),"Calculator"]})]})]})]})]})})]})}function Gs(){const[e,s]=t.useState([]),[i,r]=t.useState(!0),[l,n]=t.useState(null),[c,d]=t.useState(""),[o,m]=t.useState({totalFiles:0,supportedFiles:0}),[x,u]=t.useState({totalClaimValue:45147e6,enhancedClaimValue:61505e6,improvementPercentage:36.2,processingTime:5.8,claimsProcessed:42,successRate:100,valueByCategory:{"Financial Costs":4147e6,"Labour Costs":2946e6,"Loss of Opportunity":904e7,"Materials Escalation":3591e6,"Equipment Costs":5218e6,"Overhead Costs":3874e6,"Profit Loss":4692e6,"Other Claims":2997e6},dailyProcessingData:{dates:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],values:[5,8,12,9,7,3,6]}}),h=async()=>{try{r(!0);const e=await fetch("/api/files/latest");if(!e.ok)throw new Error("Failed to fetch files");const t=await e.json();s(t.files),m({totalFiles:t.totalFiles,supportedFiles:t.supportedFiles}),d(t.lastScanned),n(null)}catch(e){n(e instanceof Error?e.message:"Unknown error")}finally{r(!1)}};t.useEffect(()=>{h();const e=setInterval(h,3e4);return()=>clearInterval(e)},[]);const p=e=>new Date(e).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=e=>`₹${(e/1e7).toFixed(2)} Cr`,f=e=>{switch(e.toLowerCase()){case".pdf":case".txt":return"📄";case".doc":case".docx":return"📝";case".xlsx":case".xls":return"📊";case".tex":return"📋";default:return"📁"}},g=(e,s)=>{if(!s)return"text-gray-400";switch(e.toLowerCase()){case".pdf":return"text-red-600";case".doc":case".docx":return"text-blue-600";case".xlsx":case".xls":return"text-green-600";case".txt":case".tex":return"text-purple-600";default:return"text-gray-600"}};return a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Claims Evaluator Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Advanced analytics and file monitoring for claims analysis"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow p-6 text-white",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xl font-medium",children:"💰"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-white text-opacity-80",children:"Total Claim Value"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:j(x.enhancedClaimValue)}),a.jsxs("p",{className:"text-xs font-medium text-white text-opacity-80",children:[a.jsxs("span",{className:"text-green-300",children:["↑ ",x.improvementPercentage,"%"]})," from original"]})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow p-6 text-white",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xl font-medium",children:"⚡"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-white text-opacity-80",children:"Processing Time"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:[x.processingTime,"s"]}),a.jsx("p",{className:"text-xs font-medium text-white text-opacity-80",children:a.jsx("span",{className:"text-green-300",children:"Instant AI Analysis"})})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow p-6 text-white",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xl font-medium",children:"📊"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-white text-opacity-80",children:"Claims Processed"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:x.claimsProcessed}),a.jsx("p",{className:"text-xs font-medium text-white text-opacity-80",children:a.jsxs("span",{className:"text-green-300",children:[x.successRate,"% Success Rate"]})})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg shadow p-6 text-white",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xl font-medium",children:"🚀"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-white text-opacity-80",children:"Value Added"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:j(x.enhancedClaimValue-x.totalClaimValue)}),a.jsx("p",{className:"text-xs font-medium text-white text-opacity-80",children:a.jsx("span",{className:"text-green-300",children:"Additional Value"})})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Processing Activity"}),a.jsx("div",{className:"h-64",children:a.jsx(Q,{data:{labels:x.dailyProcessingData.dates,datasets:[{label:"Claims Processed",data:x.dailyProcessingData.values,borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{display:!1}}}}})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Claim Value by Category"}),a.jsx("div",{className:"space-y-4",children:Object.entries(x.valueByCategory).map(([e,s])=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-32 truncate text-sm text-gray-600",children:e}),a.jsx("div",{className:"flex-1 ml-2",children:a.jsx("div",{className:"h-4 w-full bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:s/x.enhancedClaimValue*100+"%"}})})}),a.jsx("div",{className:"ml-2 text-sm font-medium text-gray-900",children:j(s)})]},e))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:"📁"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Files"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalFiles})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:"✅"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Supported Files"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.supportedFiles})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:"🔄"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Last Scanned"}),a.jsx("p",{className:"text-xs font-medium text-gray-900",children:c?p(c):"Never"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("button",{onClick:h,disabled:i,className:"w-8 h-8 bg-indigo-500 hover:bg-indigo-600 disabled:bg-gray-400 rounded-md flex items-center justify-center transition-colors",children:a.jsx("span",{className:"text-white text-sm font-medium",children:i?"⏳":"🔄"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Refresh Files"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Click to update"})]})]})})]}),l&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsx("div",{className:"flex",children:a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading files"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:l})]})})}),a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Latest Files from Your PC"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Showing recent files from your documents folder, sorted by modification date"})]}),i?a.jsx("div",{className:"p-8 text-center",children:a.jsxs("div",{className:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-gray-500 bg-white transition ease-in-out duration-150",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading files..."]})}):0===e.length?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📁"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No files found"}),a.jsx("p",{className:"text-sm",children:"No supported files found in the documents folder"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modified"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50 "+(e.isSupported?"":"opacity-60"),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-2xl mr-3",children:f(e.extension)}),a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",title:e.filename,children:e.filename})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sizeFormatted}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(e.modifiedTime)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`text-sm font-medium ${g(e.extension,e.isSupported)}`,children:e.extension.toUpperCase().substring(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isSupported?a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ Supported"}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"⚠ Unsupported"})})]},s))})]})})]}),a.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:a.jsx("p",{children:"Files are automatically refreshed every 30 seconds • ClaimEvaluator11 v3.0"})})]})})}We.register(Je,Ke,Ye,Ze,Xe,es,ss,ts);const Ws=({template:e,onSelect:s,onDuplicate:t,onEdit:i,isFavorite:r=!1,onToggleFavorite:l,lastUsed:n})=>{var c;return a.jsxs(ws,{className:"w-full transition-all hover:shadow-md",children:[a.jsxs(Cs,{className:"pb-2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx(Ss,{className:"text-lg",children:e.name}),l&&a.jsx(Ds,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),l(e.id)},children:a.jsx(G,{className:r?"fill-yellow-400 text-yellow-400":"text-muted-foreground",size:18})})]}),a.jsx(ks,{className:"line-clamp-2",children:e.description})]}),a.jsxs(Fs,{className:"pb-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[a.jsx(Is,{variant:"outline",children:e.category}),a.jsxs(Is,{variant:"secondary",children:["Variant ",e.variant]})]}),a.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[a.jsx(O,{size:14,className:"mr-1"}),a.jsxs("span",{children:[(null==(c=e.sections)?void 0:c.length)||0," sections"]}),n&&a.jsxs(a.Fragment,{children:[a.jsx(W,{size:14,className:"ml-3 mr-1"}),a.jsxs("span",{children:["Last used: ",n]})]})]})]}),a.jsx(Ts,{className:"pt-2",children:a.jsxs("div",{className:"flex gap-2 w-full",children:[a.jsx(Ds,{variant:"default",className:"flex-1",onClick:()=>s(e.id),children:"Use Template"}),a.jsxs("div",{className:"flex gap-1",children:[i&&a.jsx(Ds,{variant:"outline",size:"icon",onClick:s=>{s.stopPropagation(),i(e.id)},children:a.jsx(O,{size:16})}),t&&a.jsx(Ds,{variant:"outline",size:"icon",onClick:s=>{s.stopPropagation(),t(e.id)},children:a.jsx(J,{size:16})})]})]})})]})},Js=t.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:xs("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));Js.displayName="Textarea";const Ks=X,Ys=t.forwardRef(({className:e,...s},t)=>a.jsx(K,{ref:t,className:xs("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));Ys.displayName=K.displayName;const Zs=t.forwardRef(({className:e,...s},t)=>a.jsx(Y,{ref:t,className:xs("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));Zs.displayName=Y.displayName;const Xs=t.forwardRef(({className:e,...s},t)=>a.jsx(Z,{ref:t,className:xs("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));Xs.displayName=Z.displayName;const et=({template:e,onSave:s,onCancel:i})=>{var r,l,n,c,d;const{toast:o}=ms(),[m,x]=t.useState("basic"),[u,h]=t.useState(e||{id:`template-${Date.now()}`,name:"",category:"",description:"",variant:"A",version:"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),sections:[],checklist:[],tags:[]}),p=(e,s)=>{h(t=>({...t,[e]:s,updatedAt:(new Date).toISOString()}))},j=()=>{const e={id:`section-${Date.now()}`,title:`New Section ${u.sections.length+1}`,description:"",fields:[],order:u.sections.length,isRequired:!1};h(s=>({...s,sections:[...s.sections,e],updatedAt:(new Date).toISOString()}))},f=(e,s,t)=>{h(a=>({...a,sections:a.sections.map(a=>a.id===e?{...a,[s]:t}:a),updatedAt:(new Date).toISOString()}))},g=(e,s,t,a)=>{h(i=>({...i,sections:i.sections.map(i=>i.id===e?{...i,fields:i.fields.map(e=>e.id===s?{...e,[t]:a}:e)}:i),updatedAt:(new Date).toISOString()}))},y=()=>{const e={id:`checklist-${Date.now()}`,description:"",category:"Documentation",required:!1};h(s=>({...s,checklist:[...s.checklist,e],updatedAt:(new Date).toISOString()}))},v=(e,s,t)=>{h(a=>({...a,checklist:a.checklist.map(a=>a.id===e?{...a,[s]:t}:a),updatedAt:(new Date).toISOString()}))},N=()=>{u.name?(s({...u,updatedAt:(new Date).toISOString()}),o({title:"Success",description:"Template saved successfully"})):o({title:"Error",description:"Template name is required",variant:"destructive"})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:e?"Edit Template":"Create New Template"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ds,{variant:"outline",onClick:i,children:"Cancel"}),a.jsx(Ds,{onClick:N,children:"Save Template"})]})]}),a.jsxs(Ks,{value:m,onValueChange:x,children:[a.jsxs(Ys,{className:"grid w-full grid-cols-4",children:[a.jsx(Zs,{value:"basic",children:"Basic Info"}),a.jsx(Zs,{value:"sections",children:"Sections & Fields"}),a.jsx(Zs,{value:"checklist",children:"Checklist"}),a.jsx(Zs,{value:"compliance",children:"Compliance"})]}),a.jsx(Xs,{value:"basic",className:"space-y-4 mt-4",children:a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Template Information"})}),a.jsxs(Fs,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"name",children:"Template Name"}),a.jsx(Rs,{id:"name",value:u.name,onChange:e=>p("name",e.target.value),placeholder:"Enter template name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"category",children:"Category"}),a.jsxs(zs,{value:u.category,onValueChange:e=>p("category",e),children:[a.jsx(Os,{children:a.jsx(Bs,{placeholder:"Select category"})}),a.jsxs(Us,{children:[a.jsx(qs,{value:"delay-claims",children:"Delay Claims"}),a.jsx(qs,{value:"variation-claims",children:"Variation Claims"}),a.jsx(qs,{value:"escalation-claims",children:"Escalation Claims"}),a.jsx(qs,{value:"prolongation-costs",children:"Prolongation Costs"}),a.jsx(qs,{value:"additional-works",children:"Additional Works"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"variant",children:"Variant"}),a.jsxs(zs,{value:u.variant,onValueChange:e=>p("variant",e),children:[a.jsx(Os,{children:a.jsx(Bs,{placeholder:"Select variant"})}),a.jsxs(Us,{children:[a.jsx(qs,{value:"A",children:"Variant A (Standard)"}),a.jsx(qs,{value:"B",children:"Variant B (Detailed)"}),a.jsx(qs,{value:"C",children:"Variant C (Comprehensive)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"version",children:"Version"}),a.jsx(Rs,{id:"version",value:u.version,onChange:e=>p("version",e.target.value),placeholder:"1.0.0"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"description",children:"Description"}),a.jsx(Js,{id:"description",value:u.description,onChange:e=>p("description",e.target.value),placeholder:"Enter template description",rows:3})]})]})]})}),a.jsxs(Xs,{value:"sections",className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Template Sections"}),a.jsxs(Ds,{onClick:j,size:"sm",children:[a.jsx(ee,{className:"mr-1",size:16})," Add Section"]})]}),0===u.sections.length?a.jsx(ws,{children:a.jsxs(Fs,{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No sections added yet"}),a.jsxs(Ds,{onClick:j,children:[a.jsx(ee,{className:"mr-1",size:16})," Add Your First Section"]})]})}):u.sections.map((e,s)=>a.jsxs(ws,{className:"mb-4",children:[a.jsx(Cs,{className:"pb-2",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx(Rs,{value:e.title,onChange:s=>f(e.id,"title",s.target.value),className:"font-medium text-lg"}),a.jsx(Js,{value:e.description,onChange:s=>f(e.id,"description",s.target.value),placeholder:"Section description",rows:2})]}),a.jsxs("div",{className:"flex gap-1 ml-2",children:[a.jsx(Ds,{variant:"ghost",size:"icon",onClick:()=>{return s=e.id,void h(e=>({...e,sections:e.sections.filter(e=>e.id!==s),updatedAt:(new Date).toISOString()}));var s},children:a.jsx(se,{size:16})}),s>0&&a.jsx(Ds,{variant:"ghost",size:"icon",onClick:()=>{const e=[...u.sections];[e[s],e[s-1]]=[e[s-1],e[s]],h(s=>({...s,sections:e.map((e,s)=>({...e,order:s})),updatedAt:(new Date).toISOString()}))},children:a.jsx(te,{size:16})}),s<u.sections.length-1&&a.jsx(Ds,{variant:"ghost",size:"icon",onClick:()=>{const e=[...u.sections];[e[s],e[s+1]]=[e[s+1],e[s]],h(s=>({...s,sections:e.map((e,s)=>({...e,order:s})),updatedAt:(new Date).toISOString()}))},children:a.jsx(ae,{size:16})})]})]})}),a.jsx(Fs,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Fields"}),a.jsxs(Ds,{variant:"outline",size:"sm",onClick:()=>(e=>{const s={id:`field-${Date.now()}`,label:"New Field",type:"text",required:!1,placeholder:""};h(t=>({...t,sections:t.sections.map(t=>t.id===e?{...t,fields:[...t.fields,s]}:t),updatedAt:(new Date).toISOString()}))})(e.id),children:[a.jsx(ee,{className:"mr-1",size:14})," Add Field"]})]}),0===e.fields.length?a.jsx("div",{className:"text-center py-4 text-sm text-muted-foreground",children:"No fields added yet"}):a.jsx("div",{className:"space-y-3",children:e.fields.map(s=>a.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start border p-2 rounded-md",children:[a.jsx("div",{className:"col-span-3",children:a.jsx(Rs,{value:s.label,onChange:t=>g(e.id,s.id,"label",t.target.value),placeholder:"Field Label",size:"sm"})}),a.jsx("div",{className:"col-span-2",children:a.jsxs(zs,{value:s.type,onValueChange:t=>g(e.id,s.id,"type",t),children:[a.jsx(Os,{children:a.jsx(Bs,{})}),a.jsxs(Us,{children:[a.jsx(qs,{value:"text",children:"Text"}),a.jsx(qs,{value:"number",children:"Number"}),a.jsx(qs,{value:"date",children:"Date"}),a.jsx(qs,{value:"select",children:"Select"}),a.jsx(qs,{value:"textarea",children:"Textarea"}),a.jsx(qs,{value:"file",children:"File"}),a.jsx(qs,{value:"currency",children:"Currency"}),a.jsx(qs,{value:"checkbox",children:"Checkbox"}),a.jsx(qs,{value:"radio",children:"Radio"})]})]})}),a.jsx("div",{className:"col-span-3",children:a.jsx(Rs,{value:s.placeholder||"",onChange:t=>g(e.id,s.id,"placeholder",t.target.value),placeholder:"Placeholder text",size:"sm"})}),a.jsx("div",{className:"col-span-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"text-sm flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:s.required,onChange:t=>g(e.id,s.id,"required",t.target.checked)}),"Required"]}),a.jsx(Ds,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,a=s.id,void h(e=>({...e,sections:e.sections.map(e=>e.id===t?{...e,fields:e.fields.filter(e=>e.id!==a)}:e),updatedAt:(new Date).toISOString()}));var t,a},className:"h-8 w-8",children:a.jsx(se,{size:14})})]})})]},s.id))})]})})]},e.id))]}),a.jsxs(Xs,{value:"checklist",className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Compliance Checklist"}),a.jsxs(Ds,{onClick:y,size:"sm",children:[a.jsx(ee,{className:"mr-1",size:16})," Add Item"]})]}),a.jsx(ws,{children:a.jsx(Fs,{className:"pt-6",children:0===u.checklist.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No checklist items added yet"}),a.jsxs(Ds,{onClick:y,children:[a.jsx(ee,{className:"mr-1",size:16})," Add Checklist Item"]})]}):a.jsx("div",{className:"space-y-3",children:u.checklist.map(e=>a.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start border p-2 rounded-md",children:[a.jsx("div",{className:"col-span-6",children:a.jsx(Rs,{value:e.description,onChange:s=>v(e.id,"description",s.target.value),placeholder:"Item description"})}),a.jsx("div",{className:"col-span-3",children:a.jsxs(zs,{value:e.category,onValueChange:s=>v(e.id,"category",s),children:[a.jsx(Os,{children:a.jsx(Bs,{})}),a.jsxs(Us,{children:[a.jsx(qs,{value:"Documentation",children:"Documentation"}),a.jsx(qs,{value:"Records",children:"Records"}),a.jsx(qs,{value:"Legal",children:"Legal"}),a.jsx(qs,{value:"Financial",children:"Financial"}),a.jsx(qs,{value:"Technical",children:"Technical"})]})]})}),a.jsx("div",{className:"col-span-2",children:a.jsxs("label",{className:"text-sm flex items-center gap-1",children:[a.jsx("input",{type:"checkbox",checked:e.required,onChange:s=>v(e.id,"required",s.target.checked)}),"Required"]})}),a.jsx("div",{className:"col-span-1",children:a.jsx(Ds,{variant:"ghost",size:"icon",onClick:()=>{return s=e.id,void h(e=>({...e,checklist:e.checklist.filter(e=>e.id!==s),updatedAt:(new Date).toISOString()}));var s},children:a.jsx(se,{size:16})})})]},e.id))})})})]}),a.jsx(Xs,{value:"compliance",className:"space-y-4 mt-4",children:a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"NHAI Compliance Settings"})}),a.jsxs(Fs,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{children:"Required Clauses"}),a.jsx(Js,{value:(null==(l=null==(r=u.nhaiCompliance)?void 0:r.requiredClauses)?void 0:l.join("\n"))||"",onChange:e=>{const s=e.target.value.split("\n").filter(Boolean);h(e=>({...e,nhaiCompliance:{...e.nhaiCompliance||{},requiredClauses:s},updatedAt:(new Date).toISOString()}))},placeholder:"Enter each required clause on a new line",rows:4})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{children:"Standard Format"}),a.jsx(Rs,{value:(null==(n=u.nhaiCompliance)?void 0:n.standardFormat)||"",onChange:e=>{h(s=>({...s,nhaiCompliance:{...s.nhaiCompliance||{},standardFormat:e.target.value},updatedAt:(new Date).toISOString()}))},placeholder:"Standard format reference"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{children:"Documentation Requirements"}),a.jsx(Js,{value:(null==(d=null==(c=u.nhaiCompliance)?void 0:c.documentationRequirements)?void 0:d.join("\n"))||"",onChange:e=>{const s=e.target.value.split("\n").filter(Boolean);h(e=>({...e,nhaiCompliance:{...e.nhaiCompliance||{},documentationRequirements:s},updatedAt:(new Date).toISOString()}))},placeholder:"Enter each documentation requirement on a new line",rows:4})]})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(Ds,{variant:"outline",onClick:i,children:"Cancel"}),a.jsxs(Ds,{onClick:N,children:[a.jsx(ie,{className:"mr-1",size:16})," Save Template"]})]})]})},st=me,tt=xe,at=le,it=t.forwardRef(({className:e,...s},t)=>a.jsx(re,{ref:t,className:xs("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));it.displayName=re.displayName;const rt=t.forwardRef(({className:e,children:s,...t},i)=>a.jsxs(at,{children:[a.jsx(it,{}),a.jsxs(ne,{ref:i,className:xs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,a.jsxs(ce,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(d,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rt.displayName=ne.displayName;const lt=({className:e,...s})=>a.jsx("div",{className:xs("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});lt.displayName="DialogHeader";const nt=({className:e,...s})=>a.jsx("div",{className:xs("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});nt.displayName="DialogFooter";const ct=t.forwardRef(({className:e,...s},t)=>a.jsx(de,{ref:t,className:xs("text-lg font-semibold leading-none tracking-tight",e),...s}));ct.displayName=de.displayName;t.forwardRef(({className:e,...s},t)=>a.jsx(oe,{ref:t,className:xs("text-sm text-muted-foreground",e),...s})).displayName=oe.displayName;const dt=({template:e,versions:s,onCreateVersion:i,onRestoreVersion:r})=>{const{toast:l}=ms(),[n,c]=t.useState(!1),[d,o]=t.useState(""),[m,x]=t.useState(""),[u,h]=t.useState(null),[p,j]=t.useState(!1),f=e=>new Date(e).toLocaleString();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Version History"}),a.jsxs("p",{className:"text-muted-foreground",children:["Current version: ",e.version]})]}),a.jsxs(Ds,{onClick:()=>c(!0),children:[a.jsx(ie,{className:"mr-1",size:16})," Create New Version"]})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Version History"})}),a.jsx(Fs,{children:0===s.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ue,{className:"mx-auto h-12 w-12 text-muted-foreground"}),a.jsx("p",{className:"mt-2 text-muted-foreground",children:"No version history available"}),a.jsx(Ds,{variant:"outline",className:"mt-4",onClick:()=>c(!0),children:"Create First Version"})]}):a.jsx("div",{className:"space-y-4",children:s.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center mr-3",children:a.jsx(he,{size:16,className:"text-primary"})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium",children:["Version ",e.version]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[f(e.createdAt),e.createdBy&&` by ${e.createdBy}`]})]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>(e=>{h(e),j(!0)})(e),children:"View"})})]},e.id))})})]}),a.jsx(st,{open:n,onOpenChange:c,children:a.jsxs(rt,{children:[a.jsx(lt,{children:a.jsx(ct,{children:"Create New Version"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"version",children:"Version Number"}),a.jsx(Rs,{id:"version",value:d,onChange:e=>o(e.target.value),placeholder:"e.g. 1.1.0"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{htmlFor:"changes",children:"Change Description"}),a.jsx(Js,{id:"changes",value:m,onChange:e=>x(e.target.value),placeholder:"Describe the changes made in this version",rows:4})]})]}),a.jsxs(nt,{children:[a.jsx(Ds,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),a.jsx(Ds,{onClick:()=>{d?m?(i(d,m),c(!1),o(""),x(""),l({title:"Success",description:`Version ${d} created successfully`})):l({title:"Error",description:"Change description is required",variant:"destructive"}):l({title:"Error",description:"Version number is required",variant:"destructive"})},children:"Create Version"})]})]})}),a.jsx(st,{open:p,onOpenChange:j,children:a.jsxs(rt,{className:"max-w-2xl",children:[a.jsx(lt,{children:a.jsxs(ct,{children:["Version ",null==u?void 0:u.version]})}),u&&a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created: ",f(u.createdAt),u.createdBy&&` by ${u.createdBy}`]})}),a.jsxs(Ds,{onClick:()=>{u&&(r(u.id),j(!1),l({title:"Success",description:`Restored to version ${u.version}`}))},children:[a.jsx(pe,{className:"mr-1",size:16})," Restore This Version"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{children:"Changes"}),a.jsx("div",{className:"p-3 bg-muted rounded-md",children:a.jsx("p",{children:u.changes})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Vs,{children:"Template Details"}),a.jsxs("div",{className:"border rounded-md p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Name"}),a.jsx("p",{children:u.template.name})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Description"}),a.jsx("p",{children:u.template.description})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Category"}),a.jsx("p",{children:u.template.category})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Sections"}),a.jsxs("p",{children:[u.template.sections.length," sections"]})]})]})]})]}),a.jsx(nt,{children:a.jsx(Ds,{variant:"outline",onClick:()=>j(!1),children:"Close"})})]})})]})},ot=({templates:e=[],loading:s=!1,onSave:i,onExport:r,onImport:l,templateManagement:n})=>{const{toast:c}=ms(),[d,o]=t.useState(e),[m,x]=t.useState(null),[u,h]=t.useState(!1),[p,j]=t.useState(!1),[f,g]=t.useState(""),[y,v]=t.useState(!1),[N,b]=t.useState({categories:[],variants:[],favorites:!1,sortBy:"name",sortOrder:"asc"}),[w,C]=t.useState({}),[S,k]=t.useState(!1);t.useEffect(()=>{F()},[e,f,N]),t.useEffect(()=>{o(e)},[e]);const F=()=>{let s=[...e];if(f){const e=f.toLowerCase();s=s.filter(s=>s.name.toLowerCase().includes(e)||s.description.toLowerCase().includes(e)||s.category.toLowerCase().includes(e))}N.categories&&N.categories.length>0&&(s=s.filter(e=>N.categories.includes(e.category))),N.variants&&N.variants.length>0&&(s=s.filter(e=>N.variants.includes(e.variant))),N.favorites&&(s=s.filter(e=>e.isFavorite)),N.sortBy&&s.sort((e,s)=>{const t=N.sortBy,a=e[t],i=s[t];return"asc"===N.sortOrder?a.localeCompare(i):i.localeCompare(a)}),o(s)},T=s=>{const t=e.find(e=>e.id===s);t&&x(t)},A=s=>{const t=e.find(e=>e.id===s);t&&(x(t),h(!0))},D=s=>{const t=e.find(e=>e.id===s);t&&(n?n.duplicateTemplate(s):(t.name,(new Date).toISOString(),(new Date).toISOString(),c({title:"Template Duplicated",description:`${t.name} has been duplicated.`})))},$=s=>{if(n)n.toggleFavorite(s);else{const t=e.find(e=>e.id===s);t&&c({title:"Favorite Toggled",description:`${t.name} ${t.isFavorite?"removed from":"added to"} favorites.`})}};return a.jsx("div",{className:"space-y-6",children:u||p?a.jsx(et,{template:u?m:void 0,onSave:e=>{n?n.saveCurrentTemplate(e):i&&i(e),p?j(!1):h(!1),x(null)},onCancel:()=>{h(!1),j(!1),x(null)}}):S&&m?a.jsx(dt,{template:m,versions:w[m.id]||[],onCreateVersion:(s,t)=>((s,t,a)=>{if(n)n.createNewVersion(s,t,a);else{const i=e.find(e=>e.id===s);if(!i)return;const r={id:`version-${Date.now()}`,templateId:s,version:t,createdAt:(new Date).toISOString(),changes:a,template:{...i}};C(e=>({...e,[s]:[...e[s]||[],r]})),c({title:"Version Created",description:`Version ${t} created for ${i.name}.`})}})(m.id,s,t),onRestoreVersion:e=>((e,s)=>{if(n);else{const t=(w[e]||[]).find(e=>e.id===s);if(!t)return;c({title:"Version Restored",description:`Template restored to version ${t.version}.`})}})(m.id,e)}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Template Library"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Ds,{onClick:()=>n?n.createNewTemplate():j(!0),children:[a.jsx(ee,{className:"mr-1",size:16})," Create Template"]}),a.jsxs(Ds,{variant:"outline",onClick:()=>v(!0),children:[a.jsx(je,{className:"mr-1",size:16})," Filter"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"file",id:"import-template",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:".json",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(!t)return;const a=new FileReader;a.onload=e=>{var s;try{const t=JSON.parse(null==(s=e.target)?void 0:s.result);if(!t.id||!t.name||!t.category)throw new Error("Invalid template format");const a={...t,id:`template-${Date.now()}`,importedAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};setTemplates(e=>[...e,a]),l&&l(a),c({title:"Template Imported",description:`${a.name} has been imported successfully.`})}catch(t){c({title:"Import Failed",description:"Failed to import template. Invalid format.",variant:"destructive"})}},a.readAsText(t),e.target.value=""}}),a.jsxs(Ds,{variant:"outline",children:[a.jsx(H,{className:"mr-1",size:16})," Import"]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:18}),a.jsx(Rs,{className:"pl-10",placeholder:"Search templates...",value:f,onChange:e=>g(e.target.value)})]}),0===d.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No templates found"}),a.jsxs(Ds,{onClick:()=>n?n.createNewTemplate():j(!0),children:[a.jsx(ee,{className:"mr-1",size:16})," Create New Template"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>a.jsx(Ws,{template:e,onSelect:T,onDuplicate:D,onEdit:A,isFavorite:e.isFavorite,onToggleFavorite:$,lastUsed:e.lastUsed},e.id))}),m&&!u&&!p&&!S&&a.jsx(st,{open:!!m,onOpenChange:e=>!e&&x(null),children:a.jsxs(rt,{className:"max-w-3xl",children:[a.jsx(lt,{children:a.jsx(ct,{children:m.name})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Version: ",m.version," | Category: ",m.category," | Variant: ",m.variant]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>{k(!0)},children:"Version History"}),a.jsxs(Ds,{variant:"outline",size:"sm",onClick:()=>(s=>{if(r)r(s);else{const t=e.find(e=>e.id===s);if(t){const e=JSON.stringify(t,null,2),s=`data:application/json;charset=utf-8,${encodeURIComponent(e)}`,a=`${t.name.replace(/\s+/g,"_")}_v${t.version}.json`,i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download",a),i.click(),c({title:"Template Exported",description:`${t.name} has been exported successfully.`})}}})(m.id),children:[a.jsx(ge,{className:"mr-1",size:14})," Export"]})]})]}),a.jsx("p",{children:m.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Sections"}),a.jsx("div",{className:"border rounded-md p-4",children:0===m.sections.length?a.jsx("p",{className:"text-muted-foreground",children:"No sections defined"}):a.jsx("ul",{className:"space-y-2",children:m.sections.map(e=>a.jsxs("li",{children:[a.jsx("div",{className:"font-medium",children:e.title}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.description}),a.jsxs("div",{className:"text-xs mt-1",children:[e.fields.length," fields"]})]},e.id))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Checklist"}),a.jsx("div",{className:"border rounded-md p-4",children:0===m.checklist.length?a.jsx("p",{className:"text-muted-foreground",children:"No checklist items defined"}):a.jsx("ul",{className:"space-y-1",children:m.checklist.map(e=>a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",disabled:!0}),a.jsx("span",{children:e.description}),e.required&&a.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1 rounded",children:"Required"})]},e.id))})})]})]}),a.jsxs(nt,{children:[a.jsx(Ds,{variant:"outline",onClick:()=>x(null),children:"Close"}),a.jsx(Ds,{onClick:()=>{h(!0)},children:"Edit Template"})]})]})}),a.jsx(st,{open:y,onOpenChange:v,children:a.jsxs(rt,{children:[a.jsx(lt,{children:a.jsx(ct,{children:"Filter Templates"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["delay-claims","variation-claims","escalation-claims","prolongation-costs","additional-works"].map(e=>{var s;return a.jsx(Ds,{variant:(null==(s=N.categories)?void 0:s.includes(e))?"default":"outline",size:"sm",onClick:()=>{b(s=>{const t=s.categories||[];return{...s,categories:t.includes(e)?t.filter(s=>s!==e):[...t,e]}})},children:e},e)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Variants"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["A","B","C"].map(e=>{var s;return a.jsxs(Ds,{variant:(null==(s=N.variants)?void 0:s.includes(e))?"default":"outline",size:"sm",onClick:()=>{b(s=>{const t=s.variants||[];return{...s,variants:t.includes(e)?t.filter(s=>s!==e):[...t,e]}})},children:["Variant ",e]},e)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Other Filters"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"favorites",checked:N.favorites,onChange:e=>{b(s=>({...s,favorites:e.target.checked}))}}),a.jsx("label",{htmlFor:"favorites",children:"Favorites only"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Sort By"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Ds,{variant:"name"===N.sortBy?"default":"outline",size:"sm",onClick:()=>{b(e=>({...e,sortBy:"name",sortOrder:"name"===e.sortBy&&"asc"===e.sortOrder?"desc":"asc"}))},children:["Name ","name"===N.sortBy&&("asc"===N.sortOrder?"↑":"↓")]}),a.jsxs(Ds,{variant:"createdAt"===N.sortBy?"default":"outline",size:"sm",onClick:()=>{b(e=>({...e,sortBy:"createdAt",sortOrder:"createdAt"===e.sortBy&&"asc"===e.sortOrder?"desc":"asc"}))},children:["Date Created ","createdAt"===N.sortBy&&("asc"===N.sortOrder?"↑":"↓")]}),a.jsxs(Ds,{variant:"updatedAt"===N.sortBy?"default":"outline",size:"sm",onClick:()=>{b(e=>({...e,sortBy:"updatedAt",sortOrder:"updatedAt"===e.sortBy&&"asc"===e.sortOrder?"desc":"asc"}))},children:["Last Updated ","updatedAt"===N.sortBy&&("asc"===N.sortOrder?"↑":"↓")]})]})]})]}),a.jsxs(nt,{children:[a.jsx(Ds,{variant:"outline",onClick:()=>{b({categories:[],variants:[],favorites:!1,sortBy:"name",sortOrder:"asc"})},children:"Reset"}),a.jsx(Ds,{onClick:()=>v(!1),children:"Apply Filters"})]})]})})]})})},mt=t.createContext(void 0),xt=()=>{const e=t.useContext(mt);if(void 0===e)throw new Error("useTemplates must be used within a TemplateProvider");return e};function ut(){const{templates:e,loading:s,saveTemplate:i,exportTemplate:r,importTemplate:l}=xt(),n=(()=>{const{saveTemplate:e,deleteTemplate:s,duplicateTemplate:a,createVersion:i}=xt(),[r,l]=t.useState(!1),[n,c]=t.useState(null),[d,o]=t.useState("basic-info");return{isEditing:r,editingTemplate:n,activeTab:d,setActiveTab:o,createNewTemplate:()=>{const e={id:`template-${Date.now()}`,name:"New Template",category:"",description:"",variant:"A",version:"1.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),createdBy:"user",isDefault:!1,isFavorite:!1,lastUsed:null,sections:[],checklist:[],legalBasis:[],nhaiCompliance:{requiredClauses:[],standardFormat:"",documentationRequirements:[]},sampleOutput:""};return c(e),l(!0),o("basic-info"),e},editTemplate:e=>{c({...e}),l(!0),o("basic-info")},cancelEditing:()=>{l(!1),c(null)},saveCurrentTemplate:async()=>{if(!n)return null;const s=await e(n);return s&&(l(!1),c(null)),s},addSection:()=>{if(!n)return;const e={id:`section-${Date.now()}`,title:"New Section",description:"",fields:[]};c({...n,sections:[...n.sections||[],e]})},updateSection:(e,s)=>{if(!n)return;const t=n.sections.map(t=>t.id===e?{...t,...s}:t);c({...n,sections:t})},deleteSection:e=>{if(!n)return;const s=n.sections.filter(s=>s.id!==e);c({...n,sections:s})},addField:e=>{if(!n)return;const s={id:`field-${Date.now()}`,label:"New Field",type:"text",required:!1,placeholder:""},t=n.sections.map(t=>t.id===e?{...t,fields:[...t.fields||[],s]}:t);c({...n,sections:t})},updateField:(e,s,t)=>{if(!n)return;const a=n.sections.map(a=>{if(a.id===e){const e=a.fields.map(e=>e.id===s?{...e,...t}:e);return{...a,fields:e}}return a});c({...n,sections:a})},deleteField:(e,s)=>{if(!n)return;const t=n.sections.map(t=>{if(t.id===e){const e=t.fields.filter(e=>e.id!==s);return{...t,fields:e}}return t});c({...n,sections:t})},addChecklistItem:()=>{if(!n)return;const e={id:`checklist-${Date.now()}`,description:"New checklist item",category:"General",required:!1};c({...n,checklist:[...n.checklist||[],e]})},updateChecklistItem:(e,s)=>{if(!n)return;const t=n.checklist.map(t=>t.id===e?{...t,...s}:t);c({...n,checklist:t})},deleteChecklistItem:e=>{if(!n)return;const s=n.checklist.filter(s=>s.id!==e);c({...n,checklist:s})},updateBasicInfo:e=>{n&&c({...n,...e})},updateCompliance:e=>{n&&c({...n,nhaiCompliance:{...n.nhaiCompliance,...e}})},addLegalBasis:e=>{n&&c({...n,legalBasis:[...n.legalBasis||[],e]})},removeLegalBasis:e=>{if(!n)return;const s=[...n.legalBasis];s.splice(e,1),c({...n,legalBasis:s})},createNewVersion:async(e,s,t)=>await i(e,s,t)}})();return a.jsxs("div",{className:"container mx-auto py-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"NHAI Claim Templates"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ds,{variant:"outline",onClick:()=>l(""),children:[a.jsx(H,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(Ds,{variant:"outline",disabled:!e.length,onClick:()=>{},children:[a.jsx(ge,{className:"mr-2 h-4 w-4"}),"Export"]}),a.jsxs(Ds,{onClick:()=>n.createTemplate(),children:[a.jsx(ee,{className:"mr-2 h-4 w-4"}),"New Template"]})]})]}),a.jsx(ot,{templates:e,loading:s,onSave:async e=>{await i(e)},onExport:async e=>{await r(e)},onImport:async e=>{await l(JSON.stringify(e))},templateManagement:n})]})}function ht(){const{data:e,isLoading:s}=ye({queryKey:["/api/auth/user"],retry:!1});return{user:e,isLoading:s,isAuthenticated:!!e}}function pt(){var e,s,t,i;const[r]=ve(),{user:l}=ht(),n=[{name:"Dashboard",href:"/",icon:Ne},{name:"Claims",href:"/claims",icon:be},{name:"AI Assistants",href:"/ai-assistants",icon:we},{name:"Documents",href:"/documents",icon:O},{name:"Compliance",href:"/compliance",icon:Ce},{name:"Database",href:"/database",icon:Se},{name:"Clean Architecture",href:"/examples/clean-architecture",icon:Ne}];return a.jsxs("div",{className:"fixed left-0 top-0 h-full w-64 bg-card border-r border-border",children:[a.jsx("div",{className:"p-6 border-b border-border",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:a.jsx(L,{className:"h-5 w-5 text-primary-foreground"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-card-foreground",children:"ClaimMaster.ai"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Professional Edition"})]})]})}),a.jsx("nav",{className:"p-4 space-y-2",children:n.map(e=>{const s=e.icon,t="/"===(i=e.href)?"/"===r:r.startsWith(i);var i;return a.jsx(ke,{href:e.href,children:a.jsxs("a",{className:"flex items-center space-x-3 px-3 py-2 rounded-md transition-colors "+(t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${e.name.toLowerCase().replace(" ","-")}`,children:[a.jsx(s,{className:"h-5 w-5"}),a.jsx("span",{children:e.name})]})},e.name)})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-primary-foreground",children:(null==(e=null==l?void 0:l.firstName)?void 0:e[0])||(null==(t=null==(s=null==l?void 0:l.email)?void 0:s[0])?void 0:t.toUpperCase())||"U"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-card-foreground truncate",children:(null==l?void 0:l.firstName)&&(null==l?void 0:l.lastName)?`${l.firstName} ${l.lastName}`:(null==(i=null==l?void 0:l.email)?void 0:i.split("@")[0])||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Senior Engineer"})]})]}),a.jsxs(Ds,{variant:"outline",size:"sm",onClick:()=>{window.location.href="/api/logout"},className:"w-full","data-testid":"button-logout",children:[a.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}function jt({title:e,subtitle:s,showCreateButton:t=!1,onCreateClick:i}){return a.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-card-foreground",children:e}),s&&a.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[t&&i&&a.jsxs(Ds,{onClick:i,"data-testid":"header-create-button",children:[a.jsx(ee,{className:"h-4 w-4 mr-2"}),"New Claim"]}),a.jsx("div",{className:"relative",children:a.jsxs(Ds,{variant:"ghost",size:"sm","data-testid":"button-notifications",children:[a.jsx(Te,{className:"h-4 w-4"}),a.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:"3"})]})})]})]})})}function ft(){const{toast:e}=ms(),{isAuthenticated:s,isLoading:i}=ht();return t.useEffect(()=>{if(!i&&!s)return e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500)},[s,i,e]),i||!s?a.jsx("div",{className:"h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):a.jsxs("div",{className:"flex min-h-screen bg-background",children:[a.jsx(pt,{}),a.jsxs("div",{className:"flex-1 ml-64",children:[a.jsx(jt,{title:"AI Specialists",subtitle:"Leverage specialized AI experts for enhanced claim analysis"}),a.jsxs("main",{className:"p-6 space-y-6","data-testid":"ai-assistants-main",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(ws,{children:a.jsxs(Fs,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium",children:"AI Specialists Online"})]}),a.jsx("p",{className:"text-2xl font-bold mt-2",children:"3/3"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"All systems operational"})]})}),a.jsx(ws,{children:a.jsxs(Fs,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm font-medium",children:"Claims Analyzed"})]}),a.jsx("p",{className:"text-2xl font-bold mt-2",children:"1,247"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"+36.2% avg enhancement"})]})}),a.jsx(ws,{children:a.jsxs(Fs,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ae,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Processing Time"})]}),a.jsx("p",{className:"text-2xl font-bold mt-2",children:"2.3s"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Average analysis time"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(ws,{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-blue-100"}),a.jsxs(Cs,{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:a.jsx(W,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx(Ss,{className:"text-blue-900",children:"Delay Expert"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Time Extension Specialist"})]})]}),a.jsx(Is,{className:"w-fit bg-green-500 text-white",children:"Online"})]}),a.jsxs(Fs,{className:"relative space-y-4",children:[a.jsx("p",{className:"text-sm text-blue-800",children:"Specialized in analyzing project delays, critical path impacts, and time-related cost escalations using advanced scheduling algorithms and FIDIC contract provisions."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-blue-900",children:"Capabilities:"}),a.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Critical path analysis"}),a.jsx("li",{children:"• Delay impact assessment"}),a.jsx("li",{children:"• Time extension calculations"}),a.jsx("li",{children:"• Schedule correlation analysis"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-blue-600",children:"Success Rate"}),a.jsx("p",{className:"font-bold text-blue-900",children:"94.2%"})]}),a.jsx(Ds,{className:"bg-blue-500 hover:bg-blue-600 text-white","data-testid":"button-consult-delay-expert",children:"Consult Expert"})]})]})]}),a.jsxs(ws,{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-purple-100"}),a.jsxs(Cs,{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center",children:a.jsx(V,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx(Ss,{className:"text-purple-900",children:"Quantum Expert"}),a.jsx("p",{className:"text-sm text-purple-700",children:"Financial Computation Specialist"})]})]}),a.jsx(Is,{className:"w-fit bg-green-500 text-white",children:"Online"})]}),a.jsxs(Fs,{className:"relative space-y-4",children:[a.jsx("p",{className:"text-sm text-purple-800",children:"Advanced financial analysis engine performing complex quantum computations for accurate claim valuations, cost escalations, and risk assessments."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-purple-900",children:"Capabilities:"}),a.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[a.jsx("li",{children:"• Quantum cost modeling"}),a.jsx("li",{children:"• Financial impact analysis"}),a.jsx("li",{children:"• Risk probability calculations"}),a.jsx("li",{children:"• Value enhancement algorithms"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-purple-600",children:"Accuracy Rate"}),a.jsx("p",{className:"font-bold text-purple-900",children:"98.7%"})]}),a.jsx(Ds,{className:"bg-purple-500 hover:bg-purple-600 text-white","data-testid":"button-calculate-quantum",children:"Calculate"})]})]})]}),a.jsxs(ws,{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50 to-green-100"}),a.jsxs(Cs,{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center",children:a.jsx(De,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx(Ss,{className:"text-green-900",children:"AI Negotiator"}),a.jsx("p",{className:"text-sm text-green-700",children:"Settlement Strategy Specialist"})]})]}),a.jsx(Is,{className:"w-fit bg-green-500 text-white",children:"Online"})]}),a.jsxs(Fs,{className:"relative space-y-4",children:[a.jsx("p",{className:"text-sm text-green-800",children:"Strategic negotiation engine trained on thousands of successful settlements, providing optimal negotiation tactics and settlement recommendations."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-green-900",children:"Capabilities:"}),a.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[a.jsx("li",{children:"• Settlement strategy development"}),a.jsx("li",{children:"• Negotiation position analysis"}),a.jsx("li",{children:"• Risk-reward optimization"}),a.jsx("li",{children:"• Alternative resolution paths"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-green-600",children:"Settlement Rate"}),a.jsx("p",{className:"font-bold text-green-900",children:"91.5%"})]}),a.jsx(Ds,{className:"bg-green-500 hover:bg-green-600 text-white","data-testid":"button-strategize-negotiation",children:"Strategize"})]})]})]})]}),a.jsxs(ws,{children:[a.jsxs(Cs,{children:[a.jsx(Ss,{children:"Recent AI Analysis Results"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Latest expert recommendations and analysis outcomes"})]}),a.jsx(Fs,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(W,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-900",children:"CLM-2024-001 - Delay Analysis Complete"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Critical path impact identified, 42.7% value enhancement"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-blue-900",children:"₹64.5 Cr"}),a.jsx("p",{className:"text-sm text-blue-600",children:"+42.7%"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg border border-purple-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(V,{className:"h-5 w-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-purple-900",children:"CLM-2024-002 - Quantum Computation Complete"}),a.jsx("p",{className:"text-sm text-purple-700",children:"Financial model optimized, risk factors incorporated"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-purple-900",children:"₹39.1 Cr"}),a.jsx("p",{className:"text-sm text-purple-600",children:"+36.2%"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(De,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-900",children:"CLM-2024-003 - Settlement Strategy Ready"}),a.jsx("p",{className:"text-sm text-green-700",children:"Optimal negotiation position calculated, high success probability"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-green-900",children:"₹20.3 Cr"}),a.jsx("p",{className:"text-sm text-green-600",children:"+31.8%"})]})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs(Ss,{className:"flex items-center space-x-2",children:[a.jsx(z,{className:"h-5 w-5"}),a.jsx("span",{children:"Enhancement Performance"})]})}),a.jsx(Fs,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Delay Expert"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"42%"}})}),a.jsx("span",{className:"text-sm font-medium",children:"42%"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Quantum Expert"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"36%"}})}),a.jsx("span",{className:"text-sm font-medium",children:"36%"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"AI Negotiator"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"31%"}})}),a.jsx("span",{className:"text-sm font-medium",children:"31%"})]})]})]})})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"System Information"})}),a.jsx(Fs,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"AI Model Version"}),a.jsx("span",{className:"text-sm font-medium",children:"GPT-5 Enterprise"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing Engine"}),a.jsx("span",{className:"text-sm font-medium",children:"OpenAI + Grok"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Compliance Framework"}),a.jsx("span",{className:"text-sm font-medium",children:"FIDIC + NHAI"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Security Level"}),a.jsx("span",{className:"text-sm font-medium",children:"Enterprise Grade"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Update Frequency"}),a.jsx("span",{className:"text-sm font-medium",children:"Real-time"})]})]})})]})]})]})]})]})}async function gt(e){if(!e.ok){const s=await e.text()||e.statusText;throw new Error(`${e.status}: ${s}`)}}function yt(e){return/^401: .*Unauthorized/.test(e.message)}function vt(){const{toast:e}=ms(),{isAuthenticated:s,isLoading:i}=ht(),r=Ie(),[l,n]=t.useState(!1),[c,d]=t.useState({title:"",description:"",type:"",originalValue:"",projectName:"",contractorName:"",clientName:""});t.useEffect(()=>{if(!i&&!s)return e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500)},[s,i,e]);const{data:o,isLoading:m}=ye({queryKey:["/api/claims"],retry:!1}),x=Re({mutationFn:async e=>{await async function(e,s,t){const a=await fetch(s,{method:e,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await gt(a),a}("POST","/api/claims",e)},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/claims"]}),n(!1),d({title:"",description:"",type:"",originalValue:"",projectName:"",contractorName:"",clientName:""}),e({title:"Success",description:"Claim created successfully and AI analysis started."})},onError:s=>{if(yt(s))return e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500);e({title:"Error",description:"Failed to create claim. Please try again.",variant:"destructive"})}}),u=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"in_review":return"bg-yellow-100 text-yellow-800";case"ai_processing":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=e=>{switch(e){case"plant_machinery":return"bg-blue-100 text-blue-800";case"loss_opportunity":return"bg-purple-100 text-purple-800";case"material_escalation":return"bg-orange-100 text-orange-800";case"extension_time":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return i||!s?a.jsx("div",{className:"h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):a.jsxs("div",{className:"flex min-h-screen bg-background",children:[a.jsx(pt,{}),a.jsxs("div",{className:"flex-1 ml-64",children:[a.jsx(jt,{title:"Claims Management",subtitle:"Create, review, and manage construction claims"}),a.jsxs("main",{className:"p-6 space-y-6","data-testid":"claims-main",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Claims"}),a.jsxs("p",{className:"text-muted-foreground",children:[Array.isArray(o)?o.length:0," total claims"]})]}),a.jsxs(st,{open:l,onOpenChange:n,children:[a.jsx(tt,{asChild:!0,children:a.jsxs(Ds,{"data-testid":"button-new-claim",children:[a.jsx(ee,{className:"h-4 w-4 mr-2"}),"New Claim"]})}),a.jsxs(rt,{className:"max-w-2xl",children:[a.jsx(lt,{children:a.jsx(ct,{children:"Create New Claim"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"title",children:"Title *"}),a.jsx(Rs,{id:"title",value:c.title,onChange:e=>d({...c,title:e.target.value}),placeholder:"Enter claim title","data-testid":"input-claim-title"})]}),a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"type",children:"Type *"}),a.jsxs(zs,{value:c.type,onValueChange:e=>d({...c,type:e}),children:[a.jsx(Os,{"data-testid":"select-claim-type",children:a.jsx(Bs,{placeholder:"Select claim type"})}),a.jsxs(Us,{children:[a.jsx(qs,{value:"plant_machinery",children:"Plant & Machinery"}),a.jsx(qs,{value:"loss_opportunity",children:"Loss of Opportunity"}),a.jsx(qs,{value:"material_escalation",children:"Material Cost Escalation"}),a.jsx(qs,{value:"extension_time",children:"Extension of Time"}),a.jsx(qs,{value:"overhead_profit",children:"Overhead & Profit"}),a.jsx(qs,{value:"additional_work",children:"Additional Work"})]})]})]})]}),a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"description",children:"Description"}),a.jsx(Js,{id:"description",value:c.description,onChange:e=>d({...c,description:e.target.value}),placeholder:"Describe the claim in detail",rows:3,"data-testid":"textarea-claim-description"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"originalValue",children:"Original Value (₹) *"}),a.jsx(Rs,{id:"originalValue",type:"number",value:c.originalValue,onChange:e=>d({...c,originalValue:e.target.value}),placeholder:"Enter original claim value","data-testid":"input-claim-value"})]}),a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"projectName",children:"Project Name"}),a.jsx(Rs,{id:"projectName",value:c.projectName,onChange:e=>d({...c,projectName:e.target.value}),placeholder:"Enter project name","data-testid":"input-project-name"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"contractorName",children:"Contractor Name"}),a.jsx(Rs,{id:"contractorName",value:c.contractorName,onChange:e=>d({...c,contractorName:e.target.value}),placeholder:"Enter contractor name","data-testid":"input-contractor-name"})]}),a.jsxs("div",{children:[a.jsx(Vs,{htmlFor:"clientName",children:"Client Name"}),a.jsx(Rs,{id:"clientName",value:c.clientName,onChange:e=>d({...c,clientName:e.target.value}),placeholder:"Enter client name","data-testid":"input-client-name"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(Ds,{variant:"outline",onClick:()=>n(!1),"data-testid":"button-cancel-claim",children:"Cancel"}),a.jsx(Ds,{onClick:()=>{c.title&&c.type&&c.originalValue?x.mutate({...c,originalValue:parseFloat(c.originalValue).toString()}):e({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"})},disabled:x.isPending,"data-testid":"button-create-claim",children:x.isPending?"Creating...":"Create Claim"})]})]})]})]})]}),m?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):Array.isArray(o)&&0!==o.length?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(o)&&o.map(e=>{var s,t;return a.jsxs(ws,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(Cs,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx(Ss,{className:"text-lg font-medium",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:e.claimId})]}),a.jsx(Is,{className:u(e.status||"draft"),children:(null==(s=e.status)?void 0:s.replace("_"," "))||"Draft"})]})}),a.jsxs(Fs,{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(Is,{className:h(e.type),children:null==(t=e.type)?void 0:t.replace("_"," ")})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Original Value:"}),a.jsxs("span",{className:"font-medium",children:["₹",parseFloat(e.originalValue).toLocaleString("en-IN")]})]}),e.enhancedValue&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Enhanced Value:"}),a.jsxs("span",{className:"font-medium text-green-600",children:["₹",parseFloat(e.enhancedValue).toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Enhancement:"}),a.jsxs("span",{className:"font-medium text-green-600",children:["+",e.enhancementPercentage,"%"]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full "+("true"===e.aiAnalysisComplete?"bg-green-500":"bg-yellow-500")}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"true"===e.aiAnalysisComplete?"AI Complete":"Processing"})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx(Ds,{size:"sm",variant:"ghost","data-testid":`button-view-${e.claimId}`,children:a.jsx(Ee,{className:"h-4 w-4"})}),a.jsx(Ds,{size:"sm",variant:"ghost","data-testid":`button-edit-${e.claimId}`,children:a.jsx(Ve,{className:"h-4 w-4"})}),a.jsx(Ds,{size:"sm",variant:"ghost","data-testid":`button-download-${e.claimId}`,children:a.jsx(ge,{className:"h-4 w-4"})})]})]})]})]},e.id)})}):a.jsx(ws,{className:"py-12",children:a.jsxs(Fs,{className:"text-center",children:[a.jsx(O,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-card-foreground mb-2",children:"No claims yet"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first claim to start using AI-powered analysis."}),a.jsxs(Ds,{onClick:()=>n(!0),"data-testid":"button-create-first-claim",children:[a.jsx(ee,{className:"h-4 w-4 mr-2"}),"Create First Claim"]})]})})]})]})]})}function Nt(){const{toast:e}=ms(),{isAuthenticated:s,isLoading:i}=ht(),[r,l]=t.useState(""),[n,c]=t.useState(""),[d,o]=t.useState("");t.useEffect(()=>{if(!i&&!s)return e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500)},[s,i,e]);const{data:m}=ye({queryKey:["/api/claims"],retry:!1}),{data:x,isLoading:u}=ye({queryKey:["/api/documents",r],queryFn:async()=>{if(!r)return[];const e=await fetch(`/api/claims/${r}/documents`);if(!e.ok)throw new Error("Failed to fetch documents");return e.json()},enabled:!!r,retry:!1}),h=Re({mutationFn:async({claimId:e,type:s})=>{var t,a;const i={pdf:`/api/claims/${e}/documents/pdf`,word:`/api/claims/${e}/documents/word`,excel:`/api/claims/${e}/documents/excel`},r=await fetch(i[s],{method:"POST"});if(!r.ok)throw new Error(`Failed to generate ${s} document`);const l=await r.blob(),n=window.URL.createObjectURL(l),c=document.createElement("a");c.href=n,c.download=(null==(a=null==(t=r.headers.get("Content-Disposition"))?void 0:t.split("filename=")[1])?void 0:a.replace(/"/g,""))||`document.${s}`,c.click(),window.URL.revokeObjectURL(n)},onSuccess:(s,t)=>{e({title:"Success",description:`${t.type.toUpperCase()} document generated and downloaded successfully.`})},onError:s=>{if(yt(s))return e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/api/login"},500);e({title:"Error",description:"Failed to generate document. Please try again.",variant:"destructive"})}}),p=(null==x?void 0:x.filter(e=>{const s=e.fileName.toLowerCase().includes(d.toLowerCase())||e.documentType.toLowerCase().includes(d.toLowerCase()),t=!n||e.documentType===n;return s&&t}))||[],j=e=>{switch(e){case"pdf":return"fas fa-file-pdf text-red-500";case"docx":return"fas fa-file-word text-blue-500";case"xlsx":return"fas fa-file-excel text-green-500";default:return"fas fa-file text-gray-500"}},f=e=>{switch(e){case"claim_report":return"bg-red-100 text-red-800";case"legal_brief":return"bg-blue-100 text-blue-800";case"financial_analysis":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return i||!s?a.jsx("div",{className:"h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):a.jsxs("div",{className:"flex min-h-screen bg-background",children:[a.jsx(pt,{}),a.jsxs("div",{className:"flex-1 ml-64",children:[a.jsx(jt,{title:"Document Management",subtitle:"Generate, manage, and download professional claim documents"}),a.jsxs("main",{className:"p-6 space-y-6","data-testid":"documents-main",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs(Ss,{className:"flex items-center space-x-2",children:[a.jsx(O,{className:"h-5 w-5"}),a.jsx("span",{children:"Generate Documents"})]})}),a.jsxs(Fs,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Claim"}),a.jsxs(zs,{value:r,onValueChange:l,children:[a.jsx(Os,{"data-testid":"select-claim",children:a.jsx(Bs,{placeholder:"Choose a claim to generate documents"})}),a.jsx(Us,{children:Array.isArray(m)&&m.map(e=>a.jsxs(qs,{value:e.id,children:[e.claimId," - ",e.title]},e.id))})]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs(Ds,{onClick:()=>h.mutate({claimId:r,type:"pdf"}),disabled:h.isPending,className:"justify-start bg-red-500 hover:bg-red-600 text-white","data-testid":"button-generate-pdf",children:[a.jsx("i",{className:"fas fa-file-pdf mr-2"}),"Generate PDF Report"]}),a.jsxs(Ds,{onClick:()=>h.mutate({claimId:r,type:"word"}),disabled:h.isPending,className:"justify-start bg-blue-500 hover:bg-blue-600 text-white","data-testid":"button-generate-word",children:[a.jsx("i",{className:"fas fa-file-word mr-2"}),"Generate Word Document"]}),a.jsxs(Ds,{onClick:()=>h.mutate({claimId:r,type:"excel"}),disabled:h.isPending,className:"justify-start bg-green-500 hover:bg-green-600 text-white","data-testid":"button-generate-excel",children:[a.jsx("i",{className:"fas fa-file-excel mr-2"}),"Generate Excel Analysis"]})]})]})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Available Templates"})}),a.jsxs(Fs,{className:"space-y-3",children:[a.jsx("div",{className:"p-3 border border-border rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("i",{className:"fas fa-file-pdf text-red-500 text-xl"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Professional Claim Report"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"FIDIC compliant with quantum analysis"})]})]})}),a.jsx("div",{className:"p-3 border border-border rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("i",{className:"fas fa-file-word text-blue-500 text-xl"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Legal Brief Template"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"NHAI standard with legal references"})]})]})}),a.jsx("div",{className:"p-3 border border-border rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("i",{className:"fas fa-file-excel text-green-500 text-xl"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Financial Analysis Model"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed quantum computations"})]})]})})]})]})]}),a.jsxs(ws,{children:[a.jsx(Cs,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ss,{children:"Document Library"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(fe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Rs,{placeholder:"Search documents...",value:d,onChange:e=>o(e.target.value),className:"pl-8 w-64","data-testid":"input-search-documents"})]}),a.jsxs(zs,{value:n,onValueChange:c,children:[a.jsx(Os,{className:"w-40",children:a.jsx(Bs,{placeholder:"All types"})}),a.jsxs(Us,{children:[a.jsx(qs,{value:"",children:"All types"}),a.jsx(qs,{value:"claim_report",children:"Claim Reports"}),a.jsx(qs,{value:"legal_brief",children:"Legal Briefs"}),a.jsx(qs,{value:"financial_analysis",children:"Financial Analysis"})]})]})]})]})}),a.jsx(Fs,{children:r?u?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full"})}):0===p.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(O,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No documents found for this claim"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Generate documents using the form above"})]}):a.jsx("div",{className:"space-y-4",children:p.map(e=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("i",{className:j(e.fileType)}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-card-foreground",children:e.fileName}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(Is,{className:f(e.documentType),children:e.documentType.replace("_"," ")}),a.jsx("span",{className:"text-sm text-muted-foreground",children:e.fileSize?`${(e.fileSize/1024).toFixed(1)} KB`:"Unknown size"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ds,{size:"sm",variant:"ghost","data-testid":`button-view-${e.id}`,children:a.jsx(Ee,{className:"h-4 w-4"})}),a.jsx(Ds,{size:"sm",variant:"ghost","data-testid":`button-download-${e.id}`,children:a.jsx(ge,{className:"h-4 w-4"})})]})]},e.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(O,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Select a claim to view its documents"})]})})]})]})]})]})}function bt(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(ws,{className:"w-full max-w-md mx-4",children:a.jsxs(Fs,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(ze,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}new $e({defaultOptions:{queries:{queryFn:(({on401:e})=>async({queryKey:e})=>{const s=await fetch(e.join("/"),{credentials:"include"});return await gt(s),await s.json()})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});const wt="/api",Ct=new class{constructor(e="/api"){s(this,"apiUrl"),this.apiUrl=`${e}/claims`}async getAllClaims(){try{return(await Be.get(this.apiUrl)).data}catch(e){throw new Error("Failed to fetch claims")}}async getClaimById(e){try{return(await Be.get(`${this.apiUrl}/${e}`)).data}catch(s){return null}}async createClaim(e){try{return(await Be.post(this.apiUrl,e)).data}catch(s){throw new Error("Failed to create claim")}}async updateClaim(e,s){try{return(await Be.put(`${this.apiUrl}/${e}`,s)).data}catch(t){throw new Error("Failed to update claim")}}async deleteClaim(e){try{return await Be.delete(`${this.apiUrl}/${e}`),!0}catch(s){return!1}}async getClaimsByStatus(e){try{return(await Be.get(`${this.apiUrl}/status/${e}`)).data}catch(s){throw new Error(`Failed to fetch claims with status ${e}`)}}async getClaimsByCategory(e){try{return(await Be.get(`${this.apiUrl}/category/${e}`)).data}catch(s){throw new Error(`Failed to fetch claims with category ${e}`)}}async getClaimAnalytics(){try{return(await Be.get(`${this.apiUrl}/analytics`)).data}catch(e){throw new Error("Failed to fetch claim analytics")}}}(wt),St=new class{constructor(e="/api"){s(this,"apiUrl"),this.apiUrl=`${e}/templates`}async getAllTemplates(){try{return(await Be.get(this.apiUrl)).data}catch(e){throw new Error("Failed to fetch templates")}}async getTemplateById(e){try{return(await Be.get(`${this.apiUrl}/${e}`)).data}catch(s){return null}}async createTemplate(e){try{return(await Be.post(this.apiUrl,e)).data}catch(s){throw new Error("Failed to create template")}}async updateTemplate(e,s){try{return(await Be.put(`${this.apiUrl}/${e}`,s)).data}catch(t){throw new Error("Failed to update template")}}async deleteTemplate(e){try{return await Be.delete(`${this.apiUrl}/${e}`),!0}catch(s){return!1}}async getTemplatesByCategory(e){try{return(await Be.get(`${this.apiUrl}/category/${e}`)).data}catch(s){throw new Error(`Failed to fetch templates with category ${e}`)}}async getTemplateVersions(e){try{return(await Be.get(`${this.apiUrl}/${e}/versions`)).data}catch(s){throw new Error(`Failed to fetch versions for template ${e}`)}}async createTemplateVersion(e){try{return(await Be.post(`${this.apiUrl}/${e.templateId}/versions`,e)).data}catch(s){throw new Error("Failed to create template version")}}async getTemplateVersionById(e){try{return(await Be.get(`${this.apiUrl}/versions/${e}`)).data}catch(s){return null}}}(wt),kt=new class{constructor(e="/api"){s(this,"apiUrl"),this.apiUrl=`${e}/documents`}async getAllDocuments(){try{return(await Be.get(this.apiUrl)).data}catch(e){throw new Error("Failed to fetch documents")}}async getDocumentById(e){try{return(await Be.get(`${this.apiUrl}/${e}`)).data}catch(s){return null}}async createDocument(e){try{return(await Be.post(this.apiUrl,e)).data}catch(s){throw new Error("Failed to create document")}}async updateDocument(e,s){try{return(await Be.put(`${this.apiUrl}/${e}`,s)).data}catch(t){throw new Error("Failed to update document")}}async deleteDocument(e){try{return await Be.delete(`${this.apiUrl}/${e}`),!0}catch(s){return!1}}async getDocumentsByStatus(e){try{return(await Be.get(`${this.apiUrl}/status/${e}`)).data}catch(s){throw new Error(`Failed to fetch documents with status ${e}`)}}async getDocumentsByType(e){try{return(await Be.get(`${this.apiUrl}/type/${e}`)).data}catch(s){throw new Error(`Failed to fetch documents with type ${e}`)}}async getDocumentsByClaimId(e){try{return(await Be.get(`${this.apiUrl}/claim/${e}`)).data}catch(s){throw new Error(`Failed to fetch documents for claim ${e}`)}}async getDocumentAnalytics(){try{return(await Be.get(`${this.apiUrl}/analytics`)).data}catch(e){throw new Error("Failed to fetch document analytics")}}}(wt),Ft=new class{constructor(e){this.dataSource=e}async getAllClaims(){return this.dataSource.getAllClaims()}async getClaimById(e){return this.dataSource.getClaimById(e)}async createClaim(e){return this.dataSource.createClaim(e)}async updateClaim(e,s){return this.dataSource.updateClaim(e,s)}async deleteClaim(e){return this.dataSource.deleteClaim(e)}async getClaimsByStatus(e){return this.dataSource.getClaimsByStatus(e)}async getClaimsByCategory(e){return this.dataSource.getClaimsByCategory(e)}async getClaimAnalytics(){return this.dataSource.getClaimAnalytics()}}(Ct),Tt=new class{constructor(e){this.dataSource=e}async getAllTemplates(){return this.dataSource.getAllTemplates()}async getTemplateById(e){return this.dataSource.getTemplateById(e)}async createTemplate(e){return this.dataSource.createTemplate(e)}async updateTemplate(e,s){return this.dataSource.updateTemplate(e,s)}async deleteTemplate(e){return this.dataSource.deleteTemplate(e)}async getTemplatesByCategory(e){return this.dataSource.getTemplatesByCategory(e)}async getTemplateVersions(e){return this.dataSource.getTemplateVersions(e)}async createTemplateVersion(e){return this.dataSource.createTemplateVersion(e)}async getTemplateVersionById(e){return this.dataSource.getTemplateVersionById(e)}}(St),At=new class{constructor(e){this.dataSource=e}async getAllDocuments(){return this.dataSource.getAllDocuments()}async getDocumentById(e){return this.dataSource.getDocumentById(e)}async createDocument(e){return this.dataSource.createDocument(e)}async updateDocument(e,s){return this.dataSource.updateDocument(e,s)}async deleteDocument(e){return this.dataSource.deleteDocument(e)}async getDocumentsByStatus(e){return this.dataSource.getDocumentsByStatus(e)}async getDocumentsByType(e){return this.dataSource.getDocumentsByType(e)}async getDocumentsByClaimId(e){return this.dataSource.getDocumentsByClaimId(e)}async getDocumentAnalytics(){return this.dataSource.getDocumentAnalytics()}}(kt),Dt=new class{constructor(e){this.claimRepository=e}async execute(){return this.claimRepository.getAllClaims()}}(Ft),$t=new class{constructor(e){this.claimRepository=e}async execute(e){return this.claimRepository.getClaimById(e)}}(Ft),It=new class{constructor(e){this.claimRepository=e}async execute(e){return this.claimRepository.createClaim(e)}}(Ft),Rt=new class{constructor(e){this.claimRepository=e}async execute(e,s){return this.claimRepository.updateClaim(e,s)}}(Ft),Et=new class{constructor(e){this.claimRepository=e}async execute(e){return this.claimRepository.deleteClaim(e)}}(Ft),Vt=new class{constructor(e){this.claimRepository=e}async execute(e){return this.claimRepository.getClaimsByStatus(e)}}(Ft),zt=new class{constructor(e){this.claimRepository=e}async execute(e){return this.claimRepository.getClaimsByCategory(e)}}(Ft),Bt=new class{constructor(e){this.claimRepository=e}async execute(){return this.claimRepository.getClaimAnalytics()}}(Ft),Ot=new class{constructor(e){this.templateRepository=e}async execute(){return this.templateRepository.getAllTemplates()}}(Tt),Pt=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.getTemplateById(e)}}(Tt),Lt=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.createTemplate(e)}}(Tt),Ut=new class{constructor(e){this.templateRepository=e}async execute(e,s){return this.templateRepository.updateTemplate(e,s)}}(Tt),qt=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.deleteTemplate(e)}}(Tt),Mt=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.getTemplatesByCategory(e)}}(Tt),_t=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.getTemplateVersions(e)}}(Tt),Ht=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.createTemplateVersion(e)}}(Tt),Qt=new class{constructor(e){this.templateRepository=e}async execute(e){return this.templateRepository.getTemplateVersionById(e)}}(Tt),Gt=new class{constructor(e){this.documentRepository=e}async execute(){return this.documentRepository.getAllDocuments()}}(At),Wt=new class{constructor(e){this.documentRepository=e}async execute(e){return this.documentRepository.getDocumentById(e)}}(At),Jt=new class{constructor(e){this.documentRepository=e}async execute(e){return this.documentRepository.createDocument(e)}}(At),Kt=new class{constructor(e){this.documentRepository=e}async execute(e,s){return this.documentRepository.updateDocument(e,s)}}(At),Yt=new class{constructor(e){this.documentRepository=e}async execute(e){return this.documentRepository.deleteDocument(e)}}(At),Zt=new class{constructor(e){this.documentRepository=e}async execute(e){return this.documentRepository.getDocumentsByStatus(e)}}(At),Xt=new class{constructor(e){this.documentRepository=e}async execute(e){return this.documentRepository.getDocumentsByType(e)}}(At),ea=new class{constructor(e){this.documentRepository=e}async execute(e){return this.documentRepository.getDocumentsByClaimId(e)}}(At),sa=new class{constructor(e){this.documentRepository=e}async execute(){return this.documentRepository.getDocumentAnalytics()}}(At),ta=()=>((e,s,a,i,r,l,n,c)=>{const[d,o]=t.useState([]),[m,x]=t.useState(null),[u,h]=t.useState(!1),[p,j]=t.useState(null),[f,g]=t.useState(null),y=t.useCallback(async()=>{h(!0),j(null);try{const s=await e.execute();o(s)}catch(s){j("Failed to fetch claims")}finally{h(!1)}},[e]),v=t.useCallback(async e=>{h(!0),j(null);try{const t=await s.execute(e);return x(t),t}catch(t){return j(`Failed to fetch claim with id ${e}`),null}finally{h(!1)}},[s]),N=t.useCallback(async e=>{h(!0),j(null);try{const s=await a.execute(e);return o(e=>[...e,s]),s}catch(s){throw j("Failed to create claim"),s}finally{h(!1)}},[a]),b=t.useCallback(async(e,s)=>{h(!0),j(null);try{const t=await i.execute(e,s);return o(s=>s.map(s=>s.id===e?t:s)),(null==m?void 0:m.id)===e&&x(t),t}catch(t){throw j(`Failed to update claim with id ${e}`),t}finally{h(!1)}},[i,m]),w=t.useCallback(async e=>{h(!0),j(null);try{const s=await r.execute(e);return s&&(o(s=>s.filter(s=>s.id!==e)),(null==m?void 0:m.id)===e&&x(null)),s}catch(s){return j(`Failed to delete claim with id ${e}`),!1}finally{h(!1)}},[r,m]),C=t.useCallback(async e=>{h(!0),j(null);try{const s=await l.execute(e);return o(s),s}catch(s){return j(`Failed to fetch claims with status ${e}`),[]}finally{h(!1)}},[l]),S=t.useCallback(async e=>{h(!0),j(null);try{const s=await n.execute(e);return o(s),s}catch(s){return j(`Failed to fetch claims with category ${e}`),[]}finally{h(!1)}},[n]),k=t.useCallback(async()=>{h(!0),j(null);try{const e=await c.execute();return g(e),e}catch(e){return j("Failed to fetch claim analytics"),null}finally{h(!1)}},[c]);return t.useEffect(()=>{y(),k()},[y,k]),{claims:d,selectedClaim:m,loading:u,error:p,analytics:f,fetchClaims:y,fetchClaimById:v,createClaim:N,updateClaim:b,deleteClaim:w,fetchClaimsByStatus:C,fetchClaimsByCategory:S,fetchClaimAnalytics:k}})(Dt,$t,It,Rt,Et,Vt,zt,Bt),aa=()=>((e,s,a,i,r,l,n,c,d)=>{const[o,m]=t.useState([]),[x,u]=t.useState(null),[h,p]=t.useState([]),[j,f]=t.useState(null),[g,y]=t.useState(!1),[v,N]=t.useState(null),b=t.useCallback(async()=>{y(!0),N(null);try{const s=await e.execute();m(s)}catch(s){N("Failed to fetch templates")}finally{y(!1)}},[e]),w=t.useCallback(async e=>{y(!0),N(null);try{const t=await s.execute(e);return u(t),t}catch(t){return N(`Failed to fetch template with id ${e}`),null}finally{y(!1)}},[s]),C=t.useCallback(async e=>{y(!0),N(null);try{const s=await a.execute(e);return m(e=>[...e,s]),s}catch(s){throw N("Failed to create template"),s}finally{y(!1)}},[a]),S=t.useCallback(async(e,s)=>{y(!0),N(null);try{const t=await i.execute(e,s);return m(s=>s.map(s=>s.id===e?t:s)),(null==x?void 0:x.id)===e&&u(t),t}catch(t){throw N(`Failed to update template with id ${e}`),t}finally{y(!1)}},[i,x]),k=t.useCallback(async e=>{y(!0),N(null);try{const s=await r.execute(e);return s&&(m(s=>s.filter(s=>s.id!==e)),(null==x?void 0:x.id)===e&&u(null)),s}catch(s){return N(`Failed to delete template with id ${e}`),!1}finally{y(!1)}},[r,x]),F=t.useCallback(async e=>{y(!0),N(null);try{const s=await l.execute(e);return m(s),s}catch(s){return N(`Failed to fetch templates with category ${e}`),[]}finally{y(!1)}},[l]),T=t.useCallback(async e=>{y(!0),N(null);try{const s=await n.execute(e);return p(s),s}catch(s){return N(`Failed to fetch versions for template ${e}`),[]}finally{y(!1)}},[n]),A=t.useCallback(async e=>{y(!0),N(null);try{const s=await c.execute(e);return p(e=>[...e,s]),s}catch(s){throw N("Failed to create template version"),s}finally{y(!1)}},[c]),D=t.useCallback(async e=>{y(!0),N(null);try{const s=await d.execute(e);return f(s),s}catch(s){return N(`Failed to fetch template version with id ${e}`),null}finally{y(!1)}},[d]);return t.useEffect(()=>{b()},[b]),t.useEffect(()=>{x&&T(x.id)},[x,T]),{templates:o,selectedTemplate:x,versions:h,selectedVersion:j,loading:g,error:v,fetchTemplates:b,fetchTemplateById:w,createTemplate:C,updateTemplate:S,deleteTemplate:k,fetchTemplatesByCategory:F,fetchTemplateVersions:T,createTemplateVersion:A,fetchTemplateVersionById:D}})(Ot,Pt,Lt,Ut,qt,Mt,_t,Ht,Qt),ia=()=>((e,s,a,i,r,l,n,c,d)=>{const[o,m]=t.useState([]),[x,u]=t.useState(null),[h,p]=t.useState(!1),[j,f]=t.useState(null),[g,y]=t.useState(null),v=t.useCallback(async()=>{p(!0),f(null);try{const s=await e.execute();m(s)}catch(s){f("Failed to fetch documents")}finally{p(!1)}},[e]),N=t.useCallback(async e=>{p(!0),f(null);try{const t=await s.execute(e);return u(t),t}catch(t){return f(`Failed to fetch document with id ${e}`),null}finally{p(!1)}},[s]),b=t.useCallback(async e=>{p(!0),f(null);try{const s=await a.execute(e);return m(e=>[...e,s]),s}catch(s){throw f("Failed to create document"),s}finally{p(!1)}},[a]),w=t.useCallback(async(e,s)=>{p(!0),f(null);try{const t=await i.execute(e,s);return m(s=>s.map(s=>s.id===e?t:s)),(null==x?void 0:x.id)===e&&u(t),t}catch(t){throw f(`Failed to update document with id ${e}`),t}finally{p(!1)}},[i,x]),C=t.useCallback(async e=>{p(!0),f(null);try{const s=await r.execute(e);return s&&(m(s=>s.filter(s=>s.id!==e)),(null==x?void 0:x.id)===e&&u(null)),s}catch(s){return f(`Failed to delete document with id ${e}`),!1}finally{p(!1)}},[r,x]),S=t.useCallback(async e=>{p(!0),f(null);try{const s=await l.execute(e);return m(s),s}catch(s){return f(`Failed to fetch documents with status ${e}`),[]}finally{p(!1)}},[l]),k=t.useCallback(async e=>{p(!0),f(null);try{const s=await n.execute(e);return m(s),s}catch(s){return f(`Failed to fetch documents with type ${e}`),[]}finally{p(!1)}},[n]),F=t.useCallback(async e=>{p(!0),f(null);try{const s=await c.execute(e);return m(s),s}catch(s){return f(`Failed to fetch documents for claim ${e}`),[]}finally{p(!1)}},[c]),T=t.useCallback(async()=>{p(!0),f(null);try{const e=await d.execute();return y(e),e}catch(e){return f("Failed to fetch document analytics"),null}finally{p(!1)}},[d]);return t.useEffect(()=>{v(),T()},[v,T]),{documents:o,selectedDocument:x,loading:h,error:j,analytics:g,fetchDocuments:v,fetchDocumentById:N,createDocument:b,updateDocument:w,deleteDocument:C,fetchDocumentsByStatus:S,fetchDocumentsByType:k,fetchDocumentsByClaimId:F,fetchDocumentAnalytics:T}})(Gt,Wt,Jt,Kt,Yt,Zt,Xt,ea,sa),ra=t.createContext(void 0),la=({children:e})=>{const s={useClaimViewModel:ta(),useTemplateViewModel:aa(),useDocumentViewModel:ia()};return a.jsx(ra.Provider,{value:s,children:e})},na=()=>{const e=t.useContext(ra);if(void 0===e)throw new Error("useAppContext must be used within an AppProvider");return e},ca=()=>{const{useClaimViewModel:e}=na(),{claims:s,loading:i,error:r,getAllClaims:l,getClaimById:n,createClaim:c,updateClaim:d,deleteClaim:o}=e;t.useEffect(()=>{l()},[l]);return a.jsxs(ws,{className:"w-full",children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Claims Example (Clean Architecture)"})}),a.jsx(Fs,{children:i?a.jsx("p",{children:"Loading claims..."}):r?a.jsxs("p",{children:["Error: ",r]}):a.jsxs(a.Fragment,{children:[a.jsx(Ds,{onClick:()=>{const e={title:"New Test Claim",description:"This is a test claim created using clean architecture",status:"pending",category:"general",amount:1e3,submittedBy:"Test User",submittedDate:(new Date).toISOString()};c(e)},className:"mb-4",children:"Create Test Claim"}),a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsxs("div",{className:"border p-4 rounded-md",children:[a.jsx("h3",{className:"font-bold",children:e.title}),a.jsx("p",{children:e.description}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>n(e.id),children:"View Details"}),a.jsx(Ds,{variant:"destructive",size:"sm",onClick:()=>o(e.id),children:"Delete"})]})]},e.id)),0===s.length&&a.jsx("p",{children:"No claims found. Create a new claim to get started."})]})]})})]})},da=()=>{const{useTemplateViewModel:e}=na(),{templates:s,loading:i,error:r,getAllTemplates:l,getTemplateById:n,createTemplate:c,updateTemplate:d,deleteTemplate:o,getTemplateVersions:m}=e;t.useEffect(()=>{l()},[l]);return a.jsxs(ws,{className:"w-full",children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Templates Example (Clean Architecture)"})}),a.jsx(Fs,{children:i?a.jsx("p",{children:"Loading templates..."}):r?a.jsxs("p",{children:["Error: ",r]}):a.jsxs(a.Fragment,{children:[a.jsx(Ds,{onClick:()=>{const e={name:"New Test Template",description:"This is a test template created using clean architecture",category:"general",content:"<p>Template content goes here</p>",version:"1.0",createdBy:"Test User",createdDate:(new Date).toISOString()};c(e)},className:"mb-4",children:"Create Test Template"}),a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsxs("div",{className:"border p-4 rounded-md",children:[a.jsx("h3",{className:"font-bold",children:e.name}),a.jsx("p",{children:e.description}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Version: ",e.version]}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>n(e.id),children:"View Details"}),a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>m(e.id),children:"View Versions"}),a.jsx(Ds,{variant:"destructive",size:"sm",onClick:()=>o(e.id),children:"Delete"})]})]},e.id)),0===s.length&&a.jsx("p",{children:"No templates found. Create a new template to get started."})]})]})})]})},oa=()=>{const{useDocumentViewModel:e}=na(),{documents:s,loading:i,error:r,getAllDocuments:l,getDocumentById:n,createDocument:c,updateDocument:d,deleteDocument:o,getDocumentsByClaimId:m}=e;t.useEffect(()=>{l()},[l]);return a.jsxs(ws,{className:"w-full",children:[a.jsx(Cs,{children:a.jsx(Ss,{children:"Documents Example (Clean Architecture)"})}),a.jsx(Fs,{children:i?a.jsx("p",{children:"Loading documents..."}):r?a.jsxs("p",{children:["Error: ",r]}):a.jsxs(a.Fragment,{children:[a.jsx(Ds,{onClick:()=>{const e={title:"New Test Document",description:"This is a test document created using clean architecture",status:"draft",type:"report",content:"Document content goes here",claimId:"123",createdBy:"Test User",createdDate:(new Date).toISOString()};c(e)},className:"mb-4",children:"Create Test Document"}),a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsxs("div",{className:"border p-4 rounded-md",children:[a.jsx("h3",{className:"font-bold",children:e.title}),a.jsx("p",{children:e.description}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",e.type," | Status: ",e.status]}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>n(e.id),children:"View Details"}),a.jsx(Ds,{variant:"outline",size:"sm",onClick:()=>m(e.claimId),children:"Related Documents"}),a.jsx(Ds,{variant:"destructive",size:"sm",onClick:()=>o(e.id),children:"Delete"})]})]},e.id)),0===s.length&&a.jsx("p",{children:"No documents found. Create a new document to get started."})]})]})})]})},ma=()=>a.jsxs("div",{className:"container mx-auto py-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Clean Architecture Examples"}),a.jsx("p",{className:"mb-6 text-muted-foreground",children:"This page demonstrates how to use the clean architecture implementation with view models for claims, templates, and documents. Each tab shows a different example component that interacts with the corresponding view model."}),a.jsxs(Ks,{defaultValue:"claims",className:"w-full",children:[a.jsxs(Ys,{className:"grid w-full grid-cols-3",children:[a.jsx(Zs,{value:"claims",children:"Claims"}),a.jsx(Zs,{value:"templates",children:"Templates"}),a.jsx(Zs,{value:"documents",children:"Documents"})]}),a.jsx(Xs,{value:"claims",className:"mt-4",children:a.jsx(ca,{})}),a.jsx(Xs,{value:"templates",className:"mt-4",children:a.jsx(da,{})}),a.jsx(Xs,{value:"documents",className:"mt-4",children:a.jsx(oa,{})})]})]}),xa=new $e;function ua(){return a.jsx(Oe,{client:xa,children:a.jsx(Pe,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:a.jsxs(Ns,{children:[a.jsx(vs,{}),a.jsx(bs,{}),a.jsx(Le,{children:a.jsxs(Ue,{children:[a.jsx(qe,{path:"/",element:a.jsx(Qs,{})}),a.jsx(qe,{path:"/dashboard",element:a.jsx(Gs,{})}),a.jsx(qe,{path:"/templates",element:a.jsx(ut,{})}),a.jsx(qe,{path:"/ai-assistants",element:a.jsx(ft,{})}),a.jsx(qe,{path:"/claims",element:a.jsx(vt,{})}),a.jsx(qe,{path:"/documents",element:a.jsx(Nt,{})}),a.jsx(qe,{path:"/examples/clean-architecture",element:a.jsx(ma,{})}),a.jsx(qe,{path:"*",element:a.jsx(bt,{})})]})})]})})})}Me(document.getElementById("root")).render(a.jsx(la,{children:a.jsx(ua,{})}));
